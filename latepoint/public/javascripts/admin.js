"use strict";function latepoint_is_timeframe_in_periods(e,t,a,o){for(var n=arguments.length>3&&void 0!==o&&o,i=0;i<a.length;i++){var r=0,s=0,l=0,c=0,u=a[i].split(":");if(2==u.length?(r=u[0],s=u[1]):(l=u[2],c=u[3],r=parseFloat(u[0])-parseFloat(l),s=parseFloat(u[1])+parseFloat(c)),n){if(latepoint_is_period_inside_another(e,t,r,s))return!0}else if(latepoint_is_period_overlapping(e,t,r,s))return!0}return!1}function latepoint_is_period_overlapping(e,t,a,o){return e<o&&a<t}function latepoint_is_period_inside_another(e,t,a,o){return e>=a&&t<=o}function latepoint_minutes_to_hours_preferably(e){var t=latepoint_is_army_clock(),a=Math.floor(e/60);!t&&a>12&&(a-=12);var o=e%60;return o>0&&(a=a+":"+o),a}function latepoint_minutes_to_hours(e){var t=latepoint_is_army_clock(),a=Math.floor(e/60);return!t&&a>12&&(a-=12),a}function latepoint_am_or_pm(e){return latepoint_is_army_clock()?"":e<720||1440==e?"am":"pm"}function latepoint_hours_and_minutes_to_minutes(e,t){var a=e.split(":"),o=a[0],n=a[1];return"pm"==t&&o<12&&(o=parseInt(o)+12),"am"==t&&12==o&&(o=0),n=parseInt(n)+60*o}function latepoint_get_time_system(){return latepoint_helper.time_system}function latepoint_is_army_clock(){return"24"==latepoint_get_time_system()}function latepoint_minutes_to_hours_and_minutes(e,t){var a=latepoint_is_army_clock(),o=arguments.length>1&&void 0!==t?t:"%02d:%02d",n=Math.floor(e/60);!a&&n>12&&(n-=12),a||0!=n||(n=12);var e=e%60;return sprintf(o,n,e)}function latepoint_generate_form_message_html(e,t){var a='<div class="os-form-message-w status-'+t+'"><ul>';return Array.isArray(e)?e.forEach((function(e){a+="<li>"+e+"</li>"})):a+="<li>"+e+"</li>",a+="</ul></div>"}function latepoint_clear_form_messages(e){e.find(".os-form-message-w").remove()}function latepoint_show_data_in_lightbox(e,t){var a=arguments.length>1&&void 0!==t?t:"";jQuery(".latepoint-lightbox-w").remove();var o="latepoint-lightbox-w latepoint-w ";a&&(o+=a),jQuery("body").append('<div class="'+o+'"><div class="latepoint-lightbox-i">'+e+'<a href="#" class="latepoint-lightbox-close"><i class="latepoint-icon latepoint-icon-x"></i></a></div><div class="latepoint-lightbox-shadow"></div></div>'),jQuery("body").addClass("latepoint-lightbox-active")}function latepoint_add_notification(e,t){var a=arguments.length>1&&void 0!==t?t:"success",o=jQuery("body").find(".os-notifications");o.length||(jQuery("body").append('<div class="os-notifications"></div>'),o=jQuery("body").find(".os-notifications")),o.find(".item").length>0&&o.find(".item:first-child").remove(),o.append('<div class="item item-type-'+a+'">'+e+'<span class="os-notification-close"><i class="latepoint-icon latepoint-icon-x"></i></span></div>')}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o,n,i,r,s=[],l=!0,c=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(o=i.call(a)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(c)throw n}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function e(){};return{s:n,n:function t(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,r=!1,s;return{s:function t(){a=a.call(e)},n:function e(){var t=a.next();return i=t.done,t},e:function e(t){r=!0,s=t},f:function e(){try{i||null==a.return||a.return()}finally{if(r)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function latepoint_random_generator(){var e=function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function latepoint_validate_form(e){var t=[];return e.find("select[data-os-validate], input[data-os-validate], textarea[data-os-validate]").each((function(){var e=jQuery(this).data("os-validate").split(" "),a=jQuery(this),o=a.closest(".os-form-group").find("label").text(),n=!1;if(e)for(var i=0;i<e.length;i++)switch(e[i]){case"presence":a.val()||(t.push({message:o+" "+latepoint_helper.msg_validation_presence}),n=!0);break;case"phone":window.intlTelInputGlobals.getInstance(a[0]).isValidNumber()||(t.push({message:o+" "+latepoint_helper.msg_validation_invalid}),n=!0);break}n?a.closest(".os-form-group").addClass("os-invalid"):a.closest(".os-form-group").removeClass("os-invalid")})),t}function latepoint_create_form_data_from_non_form_element(e){var t=new FormData,a=e.find("select, input, textarea").serializeArray();return a&&a.forEach((function(e){return t.append(e.name,e.value)})),t}function latepoint_create_form_data_from_booking_form(e,t,a){var o=arguments.length>1&&void 0!==t&&t,n=arguments.length>2&&void 0!==a&&a,i=new FormData,r=new FormData(e[0]),s;return n&&Object.keys(n).forEach((function(e){r.set(e,n[e])})),"intlTelInputGlobals"in window&&"intlTelInputUtils"in window&&e.find("input.os-mask-phone").each((function(){var e=this.getAttribute("name"),t=window.intlTelInputGlobals.getInstance(this).getNumber(window.intlTelInputUtils.numberFormat.E164);r.set(e,t)})),i.append("params",latepoint_formdata_to_url_encoded_string(r)),i.append("action",latepoint_helper.route_action),i.append("route_name",o||e.data("route-name")),i.append("layout","none"),i.append("return_format","json"),e.find('input[type="file"]').each((function(){s=this.files;for(var e=this.getAttribute("name"),t=0;t<s.length;t++)i.append(e+"[]",s[t])})),i}function latepoint_mask_timefield(e){jQuery().inputmask&&e.inputmask({mask:"99:99",placeholder:"HH:MM"})}function latepoint_formdata_to_url_encoded_string(e){var t=new FormData,a=_createForOfIteratorHelper(e),o;try{for(a.s();!(o=a.n()).done;){var n=_slicedToArray(o.value,2),i=n[0],r=n[1];r instanceof File||("[]"===i.slice(-2)?t.append(i,r):t.set(i,r))}}catch(e){a.e(e)}finally{a.f()}return new URLSearchParams(t).toString()}function latepoint_mask_percent(e){jQuery().inputmask&&e.inputmask({alias:"decimal",radixPoint:latepoint_helper.decimal_separator,digits:4,digitsOptional:!1,suffix:"%",placeholder:"0",rightAlign:!1})}function latepoint_mask_minutes(e){jQuery().inputmask&&e.inputmask({removeMaskOnSubmit:!0,alias:"numeric",digits:0,suffix:latepoint_helper.msg_minutes_suffix,placeholder:"0",rightAlign:!1})}function latepoint_mask_money(e){jQuery().inputmask&&e.inputmask({alias:"currency",groupSeparator:latepoint_helper.thousand_separator,radixPoint:latepoint_helper.decimal_separator,digits:latepoint_helper.number_of_decimals,digitsOptional:!1,prefix:latepoint_helper.currency_symbol_before?latepoint_helper.currency_symbol_before+" ":"",suffix:latepoint_helper.currency_symbol_after?" "+latepoint_helper.currency_symbol_after:"",placeholder:"0",rightAlign:!1})}function latepoint_mask_date(e){jQuery().inputmask&&e.inputmask({alias:"datetime",inputFormat:latepoint_helper.date_format_for_js})}function latepoint_init_phone_masking_from_placeholder(e){if(latepoint_helper.mask_phone_number_fields){var t=e.attr("placeholder");t&&jQuery().inputmask&&e.inputmask(t.replace(/[0-9]/g,9))}}function latepoint_mask_phone(e){var t=e[0];if(t&&!window.intlTelInputGlobals.getInstance(t)){var a=document.body,o=JSON.parse(latepoint_helper.included_phone_countries);1===o.length&&""===o[0]&&(o=[]);for(var n=o.length?[]:window.intlTelInputGlobals.defaults.preferredCountries,i=window.intlTelInputGlobals.getCountryData(),r=0;r<i.length;r++){var s=i[r];s.name=s.name.replace(/ *\([^)]*\) */g,"")}var l=latepoint_helper.default_phone_country,c;o.length&&!o.includes(l)&&(l=o[0]),window.intlTelInput(t,{dropdownContainer:a,formatOnDisplay:!0,nationalMode:!0,autoPlaceholder:"aggressive",initialCountry:l,geoIpLookup:function e(t){var a="latepoint_phone_country";latepoint_has_cookie(a)?t(latepoint_get_cookie(a)):jQuery.get("https://ipinfo.io",(function(){}),"jsonp").always((function(e){var o=l;e&&e.country&&(o=e.country.toLowerCase(),latepoint_set_cookie(a,o)),t(o)}))},allowDropdown:1!=o.length,onlyCountries:o,preferredCountries:n,separateDialCode:latepoint_helper.is_enabled_show_dial_code_with_flag}).promise.then((function(){latepoint_init_phone_masking_from_placeholder(e)})),e.on("countrychange",(function(e){latepoint_init_phone_masking_from_placeholder(jQuery(this))}))}}function latepoint_show_booking_end_time(){return"yes"==latepoint_helper.show_booking_end_time}function latepoint_set_cookie(e,t,a){var o=new Date;o.setTime(o.getTime()+864e5*a),document.cookie=e+"="+t+";path=/;expires="+o.toGMTString()}function latepoint_get_cookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function latepoint_has_cookie(e){return null!==latepoint_get_cookie(e)}function latepoint_delete_cookie(e){latepoint_set_cookie(e,"",-1)}function latepoint_load_addons_info(){var e=jQuery(".addons-info-holder");e.addClass("os-loading");var t,a={action:"latepoint_route_call",route_name:e.data("route"),params:"",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?a.message?e.html(a.message):e.html("Something is wrong. Try refreshing the page."):alert(a.message,"error")}})}function latepoint_dismiss_message(e){return e.closest(".addon-message").slideUp(300),!1}function latepoint_check_for_updates(){if(jQuery(".version-log-w").length){var e=jQuery(".version-log-w");e.addClass("os-loading");var t,a={action:"latepoint_route_call",route_name:t=e.data("route"),params:"",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?e.html(a.message):alert(a.message,"error")}})}if(jQuery(".version-status-info").length){var o=jQuery(".version-status-info");o.addClass("os-loading");var t,a={action:"latepoint_route_call",route_name:t=o.data("route"),params:"",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function e(t){o.removeClass("os-loading"),"success"===t.status?o.html(t.message):alert(t.message,"error")}})}jQuery(".addons-info-holder").length&&latepoint_load_addons_info()}function latepoint_init_json_view(e){var t=arguments.length>0&&void 0!==e&&e;t||(t=jQuery("pre.format-json:not(.json-document)")),t.length&&t.each((function(){var e=JSON.parse(jQuery(this).html());jQuery(this).jsonViewer(e)}))}function latepoint_init_accordions(){jQuery(".latepoint-admin").on("click",".os-accordion-title",(function(){return jQuery(this).closest(".os-accordion-wrapper").toggleClass("is-open"),!1}))}function latepoint_init_sticky_side_menu(){jQuery(".os-sticky-side-menu a").on("click",(function(){jQuery(".os-sticky-side-menu li.os-active").removeClass("os-active"),jQuery(this).closest("li").addClass("os-active");var e=jQuery(this).data("section-anchor"),t=jQuery(".section-anchor#"+e).offset();return jQuery("html").animate({scrollTop:t.top},300),!1}))}function latepoint_init_template_library(){jQuery(".os-templates-wrapper .template-type-selector").on("click",(function(){jQuery(".os-templates-wrapper .template-type-selector.is-selected").removeClass("is-selected"),jQuery(this).addClass("is-selected");var e=jQuery(this).data("user-type");return jQuery(".os-templates-wrapper .os-template-item.hidden").removeClass("hidden"),jQuery('.os-templates-wrapper .os-template-item:not([data-user-type="'+e+'"])').addClass("hidden"),!1})),jQuery(".os-templates-wrapper .os-template-item").on("click",(function(){var e=jQuery(this);e.closest(".os-templates-list").find(".os-template-item.selected").removeClass("selected"),e.addClass("selected");var t=e.data("id");return jQuery(".os-template-preview").hide(),jQuery('.os-template-preview[data-id="'+t+'"]').show(),!1})),jQuery(".latepoint-select-template-btn").on("click",(function(){var e=jQuery(this),t=e.data("route"),a=e.data("action-id"),o=e.data("action-type");e.addClass("os-loading");var n={action:latepoint_helper.route_action,route_name:t,params:{template_id:jQuery(".os-template-item.selected").data("id"),action_id:a,action_type:o},return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(o){if(e.removeClass("os-loading"),o.status===latepoint_helper.response_status.success){var n=jQuery('.process-action-form[data-id="'+a+'"]');n.find(".process-action-settings").html(o.message),latepoint_init_process_action_form(n),latepoint_lightbox_close()}else alert("Error!")}}),!1}))}function latepoint_init_default_form_fields_settings(){jQuery(".os-default-fields").length&&(jQuery('.os-default-field input[type="checkbox"], .os-default-field select').on("change",(function(e){latepoint_update_default_form_fields_settings()})),jQuery(".os-default-field .os-toggler").on("ostoggler:toggle",(function(e){jQuery(e.currentTarget).hasClass("off")?jQuery(e.currentTarget).closest(".os-default-field").addClass("is-disabled"):jQuery(e.currentTarget).closest(".os-default-field").removeClass("is-disabled"),latepoint_update_default_form_fields_settings()})))}function latepoint_update_default_form_fields_settings(){var e=jQuery(".os-default-fields"),t=new FormData(e.find("form")[0]),a={action:latepoint_helper.route_action,route_name:e.data("route"),params:latepoint_formdata_to_url_encoded_string(t),return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function e(t){latepoint_add_notification(t.message)}})}function latepoint_submit_quick_booking_form(){var e=jQuery("form.booking-quick-edit-form"),t=latepoint_validate_form(e),a;if(t.length)return latepoint_add_notification(t.map((function(e){return e.message})).join(", "),"error"),!1;e.find('button[type="submit"]').addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:latepoint_create_form_data_from_booking_form(e),success:function t(a){e.find('button[type="submit"]').removeClass("os-loading"),a.form_values_to_update&&jQuery.each(a.form_values_to_update,(function(t,a){e.find('[name="'+t+'"]').val(a)})),"success"===a.status?(latepoint_add_notification(a.message),latepoint_reload_after_booking_save()):latepoint_add_notification(a.message,"error")}})}function latepoint_reload_balance_and_payments(){var e=jQuery(".balance-payment-info");e.closest(".balance-payment-wrapper").addClass("os-loading");var t=e.data("route"),a=e.closest("form.booking-quick-edit-form"),o=new FormData(a[0]),n={action:latepoint_helper.route_action,route_name:t,params:latepoint_formdata_to_url_encoded_string(o),return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){e.closest(".balance-payment-wrapper").removeClass("os-loading"),"success"===a.status?jQuery(".balance-payment-wrapper").html(a.message):alert(a.message)}})}function latepoint_init_side_menu(){jQuery(".menu-toggler").on("click",(function(){var e="full";jQuery(".latepoint-side-menu-w").hasClass("side-menu-full")?(e="compact",jQuery(".latepoint-side-menu-w").addClass("side-menu-compact").removeClass("side-menu-full")):jQuery(".latepoint-side-menu-w").addClass("side-menu-full").removeClass("side-menu-compact");var t=jQuery(this).data("route"),a={action:latepoint_helper.route_action,route_name:t,params:{menu_layout_style:e},layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function e(t){}}),!1}))}function latepoint_init_grouped_bookings_form(){}function latepoint_quick_booking_customer_cleared(){latepoint_init_input_masks(jQuery(".quick-booking-form-w .customer-quick-edit-form-w"))}function latepoint_quick_booking_customer_selected(){latepoint_init_input_masks(jQuery(".quick-booking-form-w .customer-quick-edit-form-w")),jQuery(".customer-info-w").removeClass("selecting").addClass("selected")}function latepoint_custom_day_removed(e){e.closest(".custom-day-work-period").fadeOut(300,(function(){jQuery(this).remove()}))}function latepoint_count_active_connections(e){var t=e.find(".connection-children-list li.active").length,a=e.find(".connection-children-list li").length;t==a?(t=jQuery(".selected-connections").data("all-text"),jQuery(".selected-connections").removeClass("not-all-selected")):(t=t+"/"+a,jQuery(".selected-connections").addClass("not-all-selected"),e.closest(".white-box").find(".os-select-all-toggler").prop("checked",!1)),e.find(".selected-connections strong").text(t)}function latepoint_custom_field_removed(e){e.closest(".os-form-block").remove()}function latepoint_coupon_removed(e){e.closest(".os-coupon-form").remove()}function latepoint_reminder_removed(e){e.closest(".os-reminder-form").remove()}function latepoint_init_form_blocks(){jQuery(".latepoint-content-w").on("click",".os-form-block-header",(function(){return jQuery(this).closest(".os-form-block").toggleClass("os-is-editing"),!1})),jQuery(".latepoint-content-w").on("keyup",".os-form-block-name-input",(function(){jQuery(this).closest(".os-form-block").find(".os-form-block-name").text(jQuery(this).val())}))}function latepoint_init_coupons_form(){jQuery(".latepoint-content-w").on("click",".os-coupon-form-info",(function(){return jQuery(this).closest(".os-coupon-form").toggleClass("os-is-editing"),!1})),jQuery(".latepoint-content-w").on("change","select.os-coupon-medium-select",(function(){"email"==jQuery(this).val()?jQuery(this).closest(".os-coupon-form").find(".os-coupon-email-subject").show():jQuery(this).closest(".os-coupon-form").find(".os-coupon-email-subject").hide()})),jQuery(".latepoint-content-w").on("keyup",".os-coupon-name-input",(function(){jQuery(this).closest(".os-coupon-form").find(".os-coupon-name").text(jQuery(this).val())})),jQuery(".latepoint-content-w").on("keyup",".os-coupon-code-input",(function(){jQuery(this).closest(".os-coupon-form").find(".os-coupon-code").text(jQuery(this).val())}))}function latepoint_init_reminders_form(){jQuery(".latepoint-content-w").on("click",".os-reminder-form-info",(function(){return jQuery(this).closest(".os-reminder-form").toggleClass("os-is-editing"),!1})),jQuery(".latepoint-content-w").on("change","select.os-reminder-medium-select",(function(){"email"==jQuery(this).val()?jQuery(this).closest(".os-reminder-form").find(".os-reminder-email-subject").show():jQuery(this).closest(".os-reminder-form").find(".os-reminder-email-subject").hide()})),jQuery(".latepoint-content-w").on("keyup",".os-reminder-name-input",(function(){jQuery(this).closest(".os-reminder-form").find(".os-reminder-name").text(jQuery(this).val())}))}function latepoint_custom_field_saved(e){}function latepoint_init_custom_day_schedule(){latepoint_init_input_masks(jQuery(".latepoint-lightbox-w .custom-day-schedule-w")),jQuery(".period-type-selector").on("change",(function(){jQuery(this).closest(".custom-day-calendar").attr("data-period-type",jQuery(this).val()),jQuery(".custom-day-calendar").attr("data-picking","start").data("picking","start"),"range"==jQuery(this).val()?(jQuery(".custom-day-calendar-head .calendar-heading").text(jQuery(".custom-day-calendar-head .calendar-heading").data("label-start")),jQuery(".custom-day-calendar #start_custom_date").focus()):(jQuery(".custom-day-calendar .os-day.selected").removeClass("selected"),jQuery(".latepoint-lightbox-footer").hide(),jQuery(".custom-day-calendar-head .calendar-heading").text(jQuery(".custom-day-calendar-head .calendar-heading").data("label-single")))})),jQuery("#custom_day_calendar_month, #custom_day_calendar_year").on("change",(function(){var e=jQuery(".custom-day-calendar-month"),t=e.data("route");e.addClass("os-loading");var a=jQuery("#custom_day_calendar_year").val()+"-"+jQuery("#custom_day_calendar_month").val()+"-01",o={action:latepoint_helper.route_action,route_name:t,params:{target_date_string:a},layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){e.removeClass("os-loading"),"success"===a.status&&e.html(a.message)}})})),jQuery(".custom-day-calendar").on("focus","#start_custom_date",(function(){jQuery(".custom-day-calendar-head .calendar-heading").text(jQuery(".custom-day-calendar-head .calendar-heading").data("label-start")),jQuery(".custom-day-calendar").attr("data-picking","start").data("picking","start")})),jQuery(".custom-day-calendar").on("focus","#end_custom_date",(function(){jQuery(".custom-day-calendar-head .calendar-heading").text(jQuery(".custom-day-calendar-head .calendar-heading").data("label-end")),jQuery(".custom-day-calendar").attr("data-picking","end").data("picking","end")})),jQuery(".custom-day-calendar").on("click",".os-day",(function(){var e=jQuery(this);if(e.closest(".custom-day-calendar").find(".os-day.selected").removeClass("selected"),e.addClass("selected"),"start"==jQuery(".custom-day-calendar").data("picking")){if(jQuery(".custom-day-settings-w #start_custom_date").val(e.data("date")).trigger("keyup"),"range"==jQuery(".period-type-selector").val()&&(jQuery(".custom-day-calendar #end_custom_date").focus(),!jQuery(".custom-day-calendar #end_custom_date").val()))return!1}else jQuery(".custom-day-settings-w #end_custom_date").val(e.data("date")).trigger("keyup");return jQuery(".latepoint-lightbox-footer").slideDown(200),"yes"==jQuery(".custom-day-calendar").data("show-schedule")&&jQuery(".latepoint-lightbox-w").removeClass("hide-schedule"),!1}))}function latepoint_init_updates_page(){}function latepoint_calendar_set_month_label(){jQuery(".os-current-month-label .current-month").text(jQuery(".os-monthly-calendar-days-w.active").data("calendar-month-label")),jQuery(".os-current-month-label .current-year").text(jQuery(".os-monthly-calendar-days-w.active").data("calendar-year"))}function latepoint_init_element_togglers(){jQuery("[data-toggle-element]").on("click",(function(){var e=jQuery(this);e.closest(".os-form-checkbox-group").toggleClass("is-checked"),jQuery(e.data("toggle-element")).toggle()}))}function latepoint_init_color_picker(){jQuery(".latepoint-color-picker").length&&jQuery(".latepoint-color-picker").each((function(){var e=jQuery(this).data("color"),t=jQuery(this)[0],a=jQuery(this).closest(".latepoint-color-picker-w");Pickr.create({el:t,default:e,comparison:!1,useAsButton:!0,components:{preview:!0,opacity:!1,hue:!0,interaction:{input:!1,clear:!1,save:!0}},onChange:function e(t,o){a.find(".os-form-control").val(t.toHEX().toString())}})}))}function latepoint_lightbox_close(){jQuery("body").removeClass("latepoint-lightbox-active"),jQuery(".latepoint-lightbox-w").remove()}function latepoint_reload_select_service_categories(){jQuery(".service-selector-adder-field-w").each((function(){var e=jQuery(this),t=jQuery(".service-selector-adder-field-w").find("select").data("select-source"),a={action:latepoint_helper.route_action,route_name:t,params:"",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?(latepoint_lightbox_close(),e.find("select").html(a.message),e.find("select option:last").attr("selected","selected")):alert(a.message,"error")}})}))}function latepoint_wizard_item_editing_cancelled(){jQuery(".os-wizard-setup-w").removeClass("is-sub-editing"),jQuery(".os-wizard-footer").show(),jQuery(".os-wizard-footer .os-wizard-next-btn").show()}function latepoint_load_quick_availability(e,t,a,o,n){var i=arguments.length>1&&void 0!==t&&t,r=arguments.length>2&&void 0!==a&&a,s=arguments.length>3&&void 0!==o&&o,l=arguments.length>4&&void 0!==n&&n;e.addClass("os-loading");var c=jQuery(".trigger-quick-availability").data("route"),u=jQuery(".quick-booking-form-w");i&&u.find('select[name="booking[agent_id]"]').val(i),u.find('input[name="booking[service_id]"]').val()&&0!=u.find('input[name="booking[service_id]"]').val()||u.find(".os-services-select-field-w .service-option:first").trigger("click");var d=new FormData(u.find("form")[0]);r&&d.set("start_date",r),(s||l)&&d.set("show_days_only",!0),l&&d.set("previous_days",!0);var p={action:latepoint_helper.route_action,route_name:c,params:latepoint_formdata_to_url_encoded_string(d),return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:p,success:function t(a){e.removeClass("os-loading"),"success"===a.status?s?jQuery(".latepoint-side-panel-w .quick-availability-per-day-w").html(a.message):l?(jQuery(".latepoint-side-panel-w .quick-availability-per-day-w").html(a.message),jQuery(".latepoint-side-panel-w .os-availability-days").scrollTop(30)):(jQuery(".latepoint-side-panel-w .side-sub-panel").length?jQuery(".latepoint-side-panel-w .side-sub-panel").replaceWith(a.message):jQuery(".latepoint-side-panel-w").append(a.message),jQuery(".latepoint-side-panel-w .os-availability-days").scrollTop(30),latepoint_init_quick_availability_form()):alert(a.message,"error")}})}function latepoint_init_quick_availability_form(){var e=jQuery(".quick-booking-form-w input#booking_start_date").val(),t,a,o=latepoint_hours_and_minutes_to_minutes(jQuery('.quick-booking-form-w input[name="booking[start_time][formatted_value]"]').val(),jQuery('.quick-booking-form-w input[name="booking[start_time][ampm]"]').val());jQuery(".quick-availability-per-day-w .os-availability-days").find('.agent-timeslot[data-formatted-date="'+e+'"][data-minutes="'+o+'"]').addClass("selected"),jQuery(".quick-availability-per-day-w").on("click",".load-more-quick-availability",(function(){return latepoint_load_quick_availability(jQuery(this),!1,jQuery(this).data("start-date"),!0),!1})),jQuery(".quick-availability-per-day-w").on("click",".load-prev-quick-availability",(function(){return latepoint_load_quick_availability(jQuery(this),!1,jQuery(this).data("start-date"),!1,!0),!1})),jQuery('.quick-availability-per-day-w select[name="booking[agent_id]"]').on("change",(function(){latepoint_load_quick_availability(jQuery(".trigger-quick-availability"),jQuery(this).val())})),jQuery(".os-time-group label").on("click",(function(){jQuery(this).closest(".os-time-group").find(".os-form-control").focus()})),jQuery(".quick-availability-per-day-w").on("click",".fill-booking-time",(function(){jQuery(".os-availability-days .agent-timeslot.selected").removeClass("selected"),jQuery(this).addClass("selected");var e=jQuery(this).data("date"),t=jQuery(this).data("formatted-date"),a=jQuery(this).data("minutes"),o=jQuery(".os-services-select-field-w .service-option-selected").data("duration"),n=jQuery(".quick-booking-form-w");n.find('input[name="booking[start_date]"]').val(t);var i=a,r=latepoint_minutes_to_hours_and_minutes(i);i>=720?n.find(".quick-start-time-w .time-pm").trigger("click"):n.find(".quick-start-time-w .time-am").trigger("click"),n.find('input[name="booking[start_time][formatted_value]"]').val(r),latepoint_set_booking_end_time(),n.find(".ws-period, .as-period").addClass("animate-filled-in"),setTimeout((function(){n.find(".ws-period, .as-period").removeClass("animate-filled-in")}),500)}))}function latepoint_reload_week_view_calendar(e){var t=arguments.length>0&&void 0!==e&&e,a="on"==jQuery(".cc-availability-toggler #overlay_service_availability").val()&&jQuery(".calendar-service-selector").val(),o=jQuery(".calendar-agent-selector").val(),n=jQuery(".calendar-location-selector").val(),i;latepoint_load_calendar(t||jQuery(".calendar-start-date").val(),o,n,a)}function latepoint_init_work_period_form(){latepoint_mask_timefield(jQuery(".os-time-input-w .os-mask-time"))}function latepoint_close_side_panel(){jQuery(".latepoint-side-panel-w").remove()}function reload_process_jobs_table(){jQuery("table.os-reload-on-booking-update").length&&latepoint_filter_table(jQuery("table.os-reload-on-booking-update"),jQuery("table.os-reload-on-booking-update"))}function latepoint_reload_after_booking_save(){latepoint_reload_calendar_view(),jQuery(".os-widget").each((function(){latepoint_reload_widget(jQuery(this))})),jQuery("table.os-reload-on-booking-update").length&&latepoint_filter_table(jQuery("table.os-reload-on-booking-update"),jQuery("table.os-reload-on-booking-update")),latepoint_close_side_panel()}function latepoint_transaction_removed(e){e.closest(".quick-add-transaction-box-w").remove(),latepoint_reload_balance_and_payments()}function latepoint_init_quick_booking_form(){jQuery(".latepoint-admin").on("click",".quick-booking-form-view-log-btn",(function(){var e=jQuery(this);e.addClass("os-loading");var t,a={action:"latepoint_route_call",route_name:e.data("route"),params:{booking_id:e.data("booking-id")},return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?jQuery(".latepoint-side-panel-w .side-sub-panel").length?jQuery(".latepoint-side-panel-w .side-sub-panel").replaceWith(a.message):jQuery(".latepoint-side-panel-w").append(a.message):alert(a.message,"error")}}),!1})),jQuery(".booking-quick-edit-form").on("submit",(function(e){if(jQuery(this).find('button[type="submit"]').hasClass("os-loading"))return!1;e.preventDefault(),latepoint_submit_quick_booking_form()}));var e=jQuery(".quick-booking-form-w"),e;latepoint_lightbox_close(),latepoint_remove_floating_popup(),latepoint_init_input_masks(e),e.on("keydown",":input:not(textarea):not(:submit)",(function(e){"Enter"==e.key&&e.preventDefault()})),jQuery(".os-late-select").lateSelect(),jQuery(".reload-price-breakdown").on("click",(function(){return latepoint_reload_price_breakdown(),!1})),jQuery(".quick-booking-form-w").on("click",".trigger-remove-transaction-btn",(function(){return jQuery(this).closest(".quick-add-transaction-box-w").remove(),!1})),jQuery(".trigger-quick-availability").on("click",(function(){return latepoint_load_quick_availability(jQuery(".open-quick-availability-btn")),!1})),jQuery('.quick-booking-form-w input[name="booking[start_time][formatted_value]"]').on("change",(function(){latepoint_set_booking_end_time()})),jQuery('.quick-booking-form-w input[name="booking[end_time][formatted_value]"]').on("change",(function(){latepoint_is_next_day()})),jQuery(".customers-selector-search-input").on("keyup",(function(){var e=jQuery(this),t=e.val().toLowerCase();t!=e.data("current-query")&&(e.closest(".customers-selector-search-w").addClass("os-loading"),e.data("searching-query",t),setTimeout((function(){if(t==jQuery(".customers-selector-search-input").data("searching-query")){var a={action:latepoint_helper.route_action,route_name:e.data("route"),params:{query:t},return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function a(o){e.data("searching-query")==t&&(e.closest(".customers-selector-search-w").removeClass("os-loading"),"success"===o.status?(e.data("current-query",t),jQuery(".quick-booking-form-w .customers-options-list").html(o.message)):console.log(o.message))}})}}),300,t,e))})),
jQuery(".latepoint-side-panel-w").on("change",".agent-selector",(function(){latepoint_apply_agent_selector_change()})),jQuery(".latepoint-side-panel-w").on("change",'select[name="booking[location_id]"]',(function(){latepoint_apply_agent_selector_change()})),jQuery(".latepoint-side-panel-w").on("change",'select[name="booking[total_attendies]"]',(function(){latepoint_apply_agent_selector_change()})),jQuery(".latepoint-side-panel-w").on("change",".os-affects-duration",(function(){latepoint_set_booking_end_time(),jQuery(".quick-availability-per-day-w").length&&latepoint_load_quick_availability(jQuery(".trigger-quick-availability"))})),jQuery(".latepoint-side-panel-w").on("change",".os-affects-price",(function(){latepoint_reload_price_breakdown()})),jQuery(".latepoint-side-panel-w").on("change",".os-affects-balance",(function(){latepoint_reload_balance_and_payments()})),jQuery(".latepoint-side-panel-w").on("keyup",".os-affects-balance",(function(e){13==e.keyCode&&latepoint_reload_balance_and_payments()})),jQuery(".latepoint-side-panel-w").on("click",".services-options-list .service-option",(function(){var e=jQuery(this).html(),t;return jQuery(this).closest(".os-services-select-field-w").find(".service-option-selected").html(e).data("id",jQuery(this).data("id")).data("duration",jQuery(this).data("duration")).data("duration-name",jQuery(this).data("duration-name")).data("buffer-before",jQuery(this).data("buffer-before")).data("buffer-after",jQuery(this).data("buffer-after")).data("capacity-min",jQuery(this).data("capacity-min")).data("capacity-max",jQuery(this).data("capacity-max")).data("extra-durations",jQuery(this).data("extra-durations")),jQuery(this).closest(".os-services-select-field-w").find(".service-option.selected").removeClass("selected"),jQuery(this).addClass("selected").closest(".os-services-select-field-w").removeClass("active"),latepoint_apply_service_selector_change(),!1})),(e=jQuery(".quick-booking-form-w")).trigger("latepoint:initQuickBookingForm")}function latepoint_reload_widget(e){var t=e.find("select, input").serialize(),a={action:latepoint_helper.route_action,route_name:e.data("os-reload-action"),params:t,return_format:"json"};e.addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){if(e.removeClass("os-loading"),"success"===a.status){var o=jQuery(a.message);o.removeClass("os-widget-animated"),e=e.replaceWith(o),latepoint_init_daterangepicker(o.find(".os-date-range-picker")),e.hasClass("os-widget-top-agents")&&latepoint_init_circles_charts(),e.hasClass("os-widget-daily-bookings")&&(latepoint_init_daily_bookings_chart(),latepoint_init_donut_charts())}else alert(a.message)}})}function latepoint_load_calendar(e,t,a,o){var n=arguments.length>2&&void 0!==a&&a,i=arguments.length>3&&void 0!==o&&o,r=jQuery(".calendar-week-agent-w").data("calendar-action");jQuery(".calendar-week-agent-w").addClass("os-loading");var s={target_date:e,agent_id:t};n&&(s.location_id=n),i&&(s.service_id=i);var l={action:latepoint_helper.route_action,route_name:r,params:jQuery.param(s),return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:l,success:function e(t){"success"===t.status?(jQuery(".calendar-week-agent-w").html(t.message).removeClass("os-loading"),jQuery(".calendar-load-target-date.os-loading").removeClass("os-loading")):alert(t.message)}})}function latepoint_init_quick_transaction_form(){latepoint_mask_money(jQuery(".quick-add-transaction-box-w .os-mask-money"))}function latepoint_reload_price_breakdown(){var e=jQuery(".reload-price-breakdown");e.addClass("os-loading");var t=e.closest("form.booking-quick-edit-form"),a=new FormData(t[0]),o=e.data("route"),n={action:latepoint_helper.route_action,route_name:o,params:latepoint_formdata_to_url_encoded_string(a),return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){e.removeClass("os-loading"),"success"===a.status?(jQuery(".price-breakdown-wrapper").html(a.message),latepoint_mask_money(jQuery(".price-breakdown-wrapper .os-mask-money")),latepoint_reload_balance_and_payments()):alert(a.message)}})}function latepoint_complex_selector_select(e){e.each((function(){jQuery(this).addClass("active"),jQuery(this).find(".connection-children-list li").addClass("active"),jQuery(this).find(".connection-child-is-connected").val("yes"),latepoint_count_active_connections(jQuery(this))}))}function latepoint_complex_selector_deselect(e){e.each((function(){jQuery(this).removeClass("active"),jQuery(this).removeClass("show-customize-box"),jQuery(this).find(".connection-children-list li.active").removeClass("active"),jQuery(this).find(".connection-child-is-connected").val("no"),latepoint_count_active_connections(jQuery(this))}))}function latepoint_apply_agent_selector_change(){jQuery(".quick-availability-per-day-w").length&&latepoint_load_quick_availability(jQuery(".trigger-quick-availability"))}function latepoint_is_next_day(){var e=jQuery("form.booking-quick-edit-form"),t,a,o=latepoint_hours_and_minutes_to_minutes(e.find('input[name="booking[start_time][formatted_value]"]').val(),e.find('input[name="booking[start_time][ampm]"]').val()),n,i,r=latepoint_hours_and_minutes_to_minutes(e.find('input[name="booking[end_time][formatted_value]"]').val(),e.find('input[name="booking[end_time][ampm]"]').val());r&&r<=o?e.find(".quick-end-time-w").addClass("ending-next-day"):e.find(".quick-end-time-w").removeClass("ending-next-day")}function latepoint_set_booking_end_time(){var e=jQuery("form.booking-quick-edit-form"),t=0,a=e.find(".os-service-durations select").val();t+=a,e.find('select[name="temp_service_extras_ids"] option:selected').length&&e.find('select[name="temp_service_extras_ids"] option:selected').each((function(){var e=Number(jQuery(this).data("duration")),a=jQuery(this).closest(".lateselect-w").find('.ls-item[data-value="'+jQuery(this).val()+'"]').find(".os-late-quantity-selector-input");a.length&&(e=Number(e)*Number(a.val())),t=Number(t)+Number(e)}));var o=e.find('input[name="booking[start_time][formatted_value]"]').val();if(o){var n,i=latepoint_hours_and_minutes_to_minutes(o,e.find('input[name="booking[start_time][ampm]"]').val()),r=parseInt(i)+parseInt(t);r>=1440&&(r-=1440);var s=r>=720&&r<1440?"pm":"am",l=latepoint_minutes_to_hours_and_minutes(r);e.find('input[name="booking[end_time][formatted_value]"]').val(l),e.find(".quick-end-time-w .time-ampm-select.time-"+s).trigger("click"),e.find('input[name="booking[end_time][formatted_value]"]').closest(".os-form-group").addClass("has-value")}latepoint_is_next_day()}function latepoint_apply_service_selector_change(){var e=jQuery(".os-services-select-field-w .service-option-selected"),t=e.data("id"),a=e.data("buffer-before"),o=e.data("buffer-after"),n=e.data("duration"),i=e.data("duration-name"),r=e.data("capacity-min"),s=e.data("capacity-max"),l=e.data("extra-durations"),c=jQuery("form.booking-quick-edit-form");c.find('input[name="booking[buffer_before]"]').val(a).trigger("change").closest(".os-form-group").addClass("has-value"),c.find('input[name="booking[buffer_after]"]').val(o).trigger("change").closest(".os-form-group").addClass("has-value"),c.find('input[name="booking[service_id]"]').val(t).trigger("change").closest(".os-form-group").addClass("has-value");var u,d='<option value="'+n+'">'+(i||n+" "+latepoint_helper.string_minutes)+"</option>";l.length?(jQuery.each(l,(function(e,t){var a=t.name?t.name:t.duration+" "+latepoint_helper.string_minutes;d+='<option value="'+t.duration+'">'+a+"</option>"})),c.find(".os-service-durations").show()):c.find(".os-service-durations").hide(),jQuery(".booking-total-attendies-selector-w .capacity-info strong").text(s);for(var p="",_=1;_<=s;_++)p+='<option value="'+_+'">'+_+"</option>";var y=Math.min(jQuery(".booking-total-attendies-selector-w select").val(),s);jQuery(".booking-total-attendies-selector-w select").html(p).val(y),s>1?jQuery(".booking-total-attendies-selector-w").show():jQuery(".booking-total-attendies-selector-w").hide(),c.find(".os-service-durations select").html(d),latepoint_set_booking_end_time(),jQuery(".quick-availability-per-day-w").length&&latepoint_load_quick_availability(jQuery(".trigger-quick-availability")),latepoint_init_input_masks(c)}function latepoint_init_sortable_columns(){jQuery(".os-sortable-column").on("click",(function(){var e,t="desc"==(jQuery(this).hasClass("ordered-desc")?"desc":"asc")?"asc":"desc";return jQuery(this).closest("table").find(".os-sortable-column").removeClass("ordered-desc").removeClass("ordered-asc"),jQuery(this).addClass("ordered-"+t),jQuery(this).closest("table").find(".records-ordered-by-key").val(jQuery(this).data("order-key")),jQuery(this).closest("table").find(".records-ordered-by-direction").val(t),latepoint_filter_table(jQuery(this).closest("table"),jQuery(this).closest(".os-form-group")),!1}))}function latepoint_random_text(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=a.length,n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*o));return t}function latepoint_get_order_for_service_categories(){}function latepoint_init_daterangepicker(e){e.each((function(){var e=jQuery(this).find('input[name="date_from"], .os-datepicker-date-from').val(),t=jQuery(this).find('input[name="date_to"], .os-datepicker-date-to').val(),a={};jQuery(this).data("can-be-cleared")&&(a={cancelLabel:jQuery(this).data("clear-btn-label")}),moment.locale(latepoint_helper.wp_locale),jQuery(this).daterangepicker({opens:"center",singleDatePicker:"yes"==jQuery(this).data("single-date"),startDate:e?moment(e):moment(),endDate:t?moment(t):moment(),locale:a})})),e.on("cancel.daterangepicker",(function(e,t){t.element.data("can-be-cleared")&&(t.element.find('input[name="date_from"], .os-datepicker-date-from').val(""),t.element.find('input[name="date_to"], .os-datepicker-date-to').val(""),t.element.find("span.range-picker-value").text(t.element.data("no-value-label")),t.element.hasClass("os-table-filter-datepicker")&&latepoint_filter_table(t.element.closest("table"),t.element.closest(".os-form-group")))})),e.on("apply.daterangepicker",(function(e,t){"yes"==t.element.data("single-date")?t.element.find(".range-picker-value").text(t.startDate.format("ll")):t.element.find(".range-picker-value").text(t.startDate.format("ll")+" - "+t.endDate.format("ll")),t.element.find('input[name="date_from"], .os-datepicker-date-from').attr("value",t.startDate.format("YYYY-MM-DD")),t.element.find('input[name="date_to"], .os-datepicker-date-to').attr("value",t.endDate.format("YYYY-MM-DD")),t.element.closest(".os-widget").length&&latepoint_reload_widget(t.element.closest(".os-widget")),t.element.hasClass("os-table-filter-datepicker")&&latepoint_filter_table(t.element.closest("table"),t.element.closest(".os-form-group"))}))}function latepoint_recalculate_items_count_in_category(){jQuery(".os-category-items-count").each((function(){var e=jQuery(this).closest(".os-category-parent-w").find(".item-in-category-w").length;jQuery(this).find("span").text(e)}))}function latepoint_remove_agent_box(e){var t;e.closest(".agent-box-w").fadeOut(300,(function(){jQuery(this).remove()}))}function latepoint_remove_service_box(e){var t;e.closest(".service-box-w").fadeOut(300,(function(){jQuery(this).remove()}))}function latepoint_init_monthly_view(){jQuery(".calendar-month-agents-w").length&&jQuery(".monthly-calendar-headers select").on("change",(function(){var e=jQuery(".calendar-month-agents-w"),t=e.data("route");e.addClass("os-loading");var a={month:jQuery("#monthly_calendar_month_select").val(),year:jQuery("#monthly_calendar_year_select").val()};jQuery("#monthly_calendar_location_select").length&&jQuery("#monthly_calendar_location_select").val()&&(a.location_id=jQuery("#monthly_calendar_location_select").val()),jQuery("#monthly_calendar_service_select").length&&jQuery("#monthly_calendar_service_select").val()&&(a.service_id=jQuery("#monthly_calendar_service_select").val());var o={action:latepoint_helper.route_action,route_name:t,params:a,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){e.removeClass("os-loading"),"success"===a.status&&e.html(a.message)}})}))}function latepoint_init_copy_on_click_elements(){jQuery(".os-click-to-copy").on("mouseenter",(function(){var e=jQuery(this),t=e.offset(),a=jQuery(this).outerWidth(),o=t.left+a+5,n=t.top+2-jQuery(window).scrollTop();"left"==e.data("copy-tooltip-position")&&(o=o-a-5,n=n+e.outerHeight()-jQuery(window).scrollTop()),jQuery("body").append('<div class="os-click-to-copy-prompt" style="top: '+n+"px; left: "+o+'px;">'+latepoint_helper.click_to_copy_prompt+"</div>")})).on("mouseleave",(function(){jQuery("body").find(".os-click-to-copy-prompt").remove()})),jQuery(".os-click-to-copy").on("click",(function(){var e=jQuery(this);jQuery("body").find(".os-click-to-copy-prompt").hide();var t=jQuery("<input>");jQuery("body").append(t);var a=e.is("input")?e.val():e.text();t.val(a).trigger("select"),document.execCommand("Copy"),t.remove();var o=e.offset(),n=e.outerWidth(),i=o.left+n+5,r=o.top+3-jQuery(window).scrollTop(),s;"left"==e.data("copy-tooltip-position")&&(i=i-n-5,r=r+e.outerHeight()-jQuery(window).scrollTop()),jQuery('<div class="os-click-to-copy-done" style="top: '+r+"px; left: "+i+'px;">'+latepoint_helper.click_to_copy_done+"</div>").appendTo(jQuery("body")).animate({opacity:0,left:i+20},600),setTimeout((function(){jQuery("body").find(".os-click-to-copy-done").remove(),jQuery("body").find(".os-click-to-copy-prompt").show()}),800)}))}function latepoint_remove_floating_popup(){jQuery(".os-showing-popup").removeClass("os-showing-popup"),jQuery(".os-floating-popup").remove()}function latepoint_init_clickable_cells(){jQuery(".os-clickable-popup-trigger").on("click",(function(){var e=jQuery(this),t=e.offset(),a=e.outerWidth(),o=jQuery('<div class="os-floating-popup os-loading"></div>');if(e.hasClass("os-showing-popup"))latepoint_remove_floating_popup();else{latepoint_remove_floating_popup(),o.offset({top:t.top,left:t.left+a/2}),jQuery("body").append(o),e.addClass("os-showing-popup");var n=e.data("route"),i=e.data("os-params"),r={action:latepoint_helper.route_action,route_name:n,params:i,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:r,success:function e(t){t.status===latepoint_helper.response_status.success&&(jQuery("body").find(".os-floating-popup").html(t.message).removeClass("os-loading"),latepoint_init_customer_donut_chart(),jQuery(".os-floating-popup .os-floating-popup-close").on("click",(function(){return latepoint_remove_floating_popup(),!1})))}})}return!1}))}function latepoint_init_tiny_mce(e){"undefined"!=typeof wp&&void 0!==wp.editor&&jQuery("#"+e).length&&(wp.editor.remove(e),wp.editor.initialize(e,{tinymce:{wpautop:!1,toolbar1:"formatselect alignjustify forecolor | bold italic underline strikethrough | bullist numlist | blockquote hr | alignleft aligncenter alignright | link unlink | pastetext removeformat | outdent indent | undo redo",height:"480"},quicktags:!0,mediaButtons:!0}))}function latepoint_init_reminder_form(){latepoint_init_tiny_mce(jQuery(".os-reminder-form:last-child textarea").attr("id"))}function latepoint_filter_table(e,t,a){var o=!(arguments.length>2&&void 0!==a)||a;t.addClass("os-loading");var n=e.find(".os-table-filter").serialize(),i=e.closest(".table-with-pagination-w");o?i.find("select.pagination-page-select").val(1):n+="&page_number="+i.find("select.pagination-page-select").val();var r=e.data("route"),s={action:latepoint_helper.route_action,route_name:r,params:n,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:s,success:function a(n){if(t.removeClass("os-loading"),"success"===n.status){if(e.find("tbody").html(n.message),n.total_pages&&o){for(var r="",s=1;s<=n.total_pages;s++)r+="<option>"+s+"</option>";i.find("select.pagination-page-select").html(r)}i.find(".os-pagination-from").text(n.showing_from),i.find(".os-pagination-to").text(n.showing_to),i.find(".os-pagination-total").text(n.total_records),latepoint_init_clickable_cells()}}})}function latepoint_init_wizard_content(){latepoint_init_input_masks(jQuery(".os-wizard-step-content"))}function latepoint_init_input_masks(e){var t=arguments.length>0&&void 0!==e&&e,a=t||jQuery("body");latepoint_mask_timefield(a.find(".os-mask-time")),a.find(".os-mask-phone").each((function(){latepoint_mask_phone(jQuery(this))})),latepoint_mask_money(a.find(".os-mask-money")),latepoint_mask_date(a.find(".os-mask-date")),latepoint_mask_minutes(a.find(".os-mask-minutes")),a.trigger("latepoint:initInputMasks")}function latepoint_init_daily_bookings_chart(){if("undefined"!=typeof Chart&&jQuery("#chartDailyBookings").length){var e=jQuery("#chartDailyBookings"),t=e.data("chart-labels").toString().split(","),a=e.data("chart-values").toString().split(",").map(Number),o=Math.max.apply(Math,a),n,i,r=o+160*o/200+1,s=latepoint_helper.font_family;Chart.Tooltip.positioners.top=function(e){var t=Chart.Tooltip.positioners.average(e);if(!1===t)return!1;var a=this.chart;return{x:t.x,y:a.chartArea.top,xAlign:"center",yAlign:"bottom"}},Chart.defaults.defaultFontFamily=s,Chart.defaults.defaultFontSize=18,Chart.defaults.defaultFontStyle="400",Chart.defaults.plugins.tooltip.titleFont={family:s,size:14,color:"rgba(255,255,255,0.6)",style:"normal",weight:400},Chart.defaults.plugins.tooltip.titleFont={family:s,size:14,weight:400},Chart.defaults.plugins.tooltip.titleColor="rgba(255,255,255,0.6)",Chart.defaults.plugins.tooltip.backgroundColor="#000",Chart.defaults.plugins.tooltip.titleMarginBottom=5,Chart.defaults.plugins.tooltip.bodyFont={family:s,size:24,weight:700,lineHeight:.8},Chart.defaults.plugins.tooltip.displayColors=!1,Chart.defaults.plugins.tooltip.padding=10,Chart.defaults.plugins.tooltip.yAlign="bottom",Chart.defaults.plugins.tooltip.xAlign="center",Chart.defaults.plugins.tooltip.cornerRadius=4,Chart.defaults.plugins.tooltip.caretSize=5,Chart.defaults.plugins.tooltip.position="top";var l=e[0].getContext("2d"),c=l.createLinearGradient(500,0,100,0);c.addColorStop(0,"#1d7bff"),c.addColorStop(1,"#1d7bff");var u=l.createLinearGradient(0,0,0,140);u.addColorStop(0,"rgb(206,224,255, 0.4)"),u.addColorStop(1,"rgba(206,224,255,0)");var d,p,_={id:"verticalLiner",afterInit:function e(t,a,o){t.verticalLiner={}},afterEvent:function e(t,a,o){var n=a.inChartArea;t.verticalLiner={draw:n}},beforeTooltipDraw:function e(t,a,o){var n;if(t.verticalLiner.draw){var i=t.ctx,r=t.chartArea,s=r.top,l=r.bottom,c=a.tooltip,u=null==c?void 0:c.caretX;u&&(i.save(),i.beginPath(),i.moveTo(u,s),i.lineTo(u,l),i.stroke(),i.restore())}}},y=new Chart(e,{type:"line",data:{labels:t,datasets:[{backgroundColor:u,borderColor:c,label:"",fill:!0,lineTension:.1,borderWidth:2,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#fff",pointBackgroundColor:"#1D7BFF",pointRadius:3,pointBorderWidth:2,pointHoverRadius:6,pointHoverBorderWidth:4,pointHoverBackgroundColor:"#1D7BFF",pointHoverBorderColor:"#aecdff",pointHitRadius:20,spanGaps:!1,data:a}]},options:{animation:!1,layout:{padding:{top:0}},interaction:{mode:"index",intersect:!1},maintainAspectRatio:!1,plugins:{verticalLiner:{},legend:{display:!1}},scales:{x:{display:!0,ticks:{maxRotation:0,fontSize:"10",fontColor:"#000",callback:function e(t,a,o){return o.length&&(a+2)%Math.round(o.length/8)?"":this.getLabelForValue(t)}},grid:{borderDash:[1,5],color:"rgba(0,0,0,0.35)",zeroLineColor:"rgba(0,0,0,0.15)"}},y:{max:r,grid:{color:"rgba(0,0,0,0.05)",zeroLineColor:"rgba(0,0,0,0.05)"},display:!1,ticks:{beginAtZero:!0,fontSize:"10",fontColor:"#000"}}}},plugins:[_]})}}function latepoint_init_customer_donut_chart(){if("undefined"!=typeof Chart&&jQuery(".os-customer-donut-chart").length){var e=latepoint_helper.font_family;Chart.defaults.defaultFontFamily=e,Chart.defaults.defaultFontSize=16,Chart.defaults.defaultFontStyle="400",Chart.defaults.plugins.tooltip.titleFont={family:e,size:14,weight:400},Chart.defaults.plugins.tooltip.titleColor="rgba(255,255,255,0.6)",Chart.defaults.plugins.tooltip.backgroundColor="#000",Chart.defaults.plugins.tooltip.titleMarginBottom=1,Chart.defaults.plugins.tooltip.bodyFont={family:e,size:18,weight:500},Chart.defaults.plugins.tooltip.displayColors=!1,Chart.defaults.plugins.tooltip.padding=5,Chart.defaults.plugins.tooltip.yAlign="bottom",Chart.defaults.plugins.tooltip.xAlign="center",Chart.defaults.plugins.tooltip.cornerRadius=4,Chart.defaults.plugins.tooltip.intersect=!1,jQuery(".os-customer-donut-chart").each((function(e){var t=jQuery(this).data("chart-colors").toString().split(","),a=jQuery(this).data("chart-labels").toString().split(","),o=jQuery(this).data("chart-values").toString().split(",").map(Number),n=jQuery(this),i=new Chart(n,{type:"doughnut",data:{labels:a,datasets:[{data:o,backgroundColor:t,hoverBackgroundColor:t,borderWidth:0,hoverBorderColor:"transparent"}]},options:{layout:{padding:{top:10,bottom:10,left:10,right:10}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function e(t){return t[0].label},label:function e(t){return t.parsed}}}},animation:{animateRotate:!1},cutout:"90%",responsive:!1,maintainAspectRatio:!0}})}))}}function latepoint_init_donut_charts(){if("undefined"!=typeof Chart&&jQuery(".os-donut-chart").length){var e=latepoint_helper.font_family;Chart.defaults.defaultFontFamily=e,Chart.defaults.defaultFontSize=18,Chart.defaults.defaultFontStyle="400",Chart.defaults.plugins.tooltip.titleFont.family=e,Chart.defaults.plugins.tooltip.titleFont.size=14,Chart.defaults.plugins.tooltip.titleColor="rgba(255,255,255,0.6)",Chart.defaults.plugins.tooltip.backgroundColor="#000",Chart.defaults.plugins.tooltip.titleFont.style="400",Chart.defaults.plugins.tooltip.titleMarginBottom=1,Chart.defaults.plugins.tooltip.bodyFont.family=e,Chart.defaults.plugins.tooltip.bodyFont.size=24,Chart.defaults.plugins.tooltip.bodyFont.style="500",Chart.defaults.plugins.tooltip.displayColors=!1,Chart.defaults.plugins.tooltip.padding.x=10,Chart.defaults.plugins.tooltip.padding.y=8,Chart.defaults.plugins.tooltip.yAlign="bottom",Chart.defaults.plugins.tooltip.xAlign="center",Chart.defaults.plugins.tooltip.cornerRadius=8,Chart.defaults.plugins.tooltip.intersect=!1,jQuery(".os-donut-chart").each((function(e){var t=jQuery(this).data("chart-colors").toString().split(","),a=jQuery(this).data("chart-labels").toString().split(","),o=jQuery(this).data("chart-values").toString().split(",").map(Number),n=jQuery(this),i=new Chart(n,{type:"doughnut",data:{labels:a,datasets:[{data:o,backgroundColor:t,hoverBackgroundColor:t,borderWidth:0,hoverBorderColor:"transparent"}]},options:{layout:{padding:{top:40}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function e(t,a){return a.labels[t[0].index]},label:function e(t,a){return a.datasets[0].data[t.index]}}}},animation:{animateScale:!0},cutoutPercentage:96,responsive:!1,maintainAspectRatio:!0}})}))}}function latepoint_init_circles_charts(){jQuery(".circle-chart").each((function(e){var t=jQuery(this).prop("id"),a=jQuery(this).data("max-value"),o=jQuery(this).data("chart-value"),n=jQuery(this).data("chart-color"),i=jQuery(this).data("chart-color-fade"),r=Circles.create({id:t,radius:25,value:o,maxValue:a,width:2,text:function e(t){return Math.round(t)},colors:[n,i],duration:200,wrpClass:"circles-wrp",textClass:"circles-text",valueStrokeClass:"circles-valueStroke",maxValueStrokeClass:"circles-maxValueStroke",styleWrapper:!0,styleText:!0})}))}function latepoint_check_horizontal_calendar_scroll(){jQuery(".daily-availability-calendar.horizontal-calendar").length&&jQuery(".daily-availability-calendar.horizontal-calendar").width()<700&&jQuery(".daily-availability-calendar.horizontal-calendar").scrollLeft(jQuery(".os-day.selected").index()*jQuery(".os-day.selected").width())}function latepoint_init_calendars(){latepoint_check_horizontal_calendar_scroll(),jQuery(".os-calendar-settings-extra .latecheckbox").lateCheckbox(),jQuery(".calendar-settings-toggler").on("click",(function(){return jQuery(".os-calendar-settings-form").toggleClass("show-extra-settings"),!1})),jQuery(".os-calendar-settings-form").on("change",'select[name="calendar_settings[view]"]',(function(){jQuery(this).closest(".calendar-wrapper").attr("data-view",jQuery(this).val())})),jQuery(".os-calendar-settings-form").on("change","select, input, .latecheckbox ",(function(){latepoint_reload_calendar_view()})),jQuery(".calendar-view-wrapper").on("click",".weekly-calendar-agent-selector",(function(){return jQuery(".weekly-calendar-agent-selector.selected").removeClass("selected"),jQuery(this).addClass("selected"),jQuery('.os-calendar-settings-form input[name="calendar_settings[selected_agent_id]"]').val(jQuery(this).data("agent-id")),jQuery(".agent-weekly-calendar.selected").removeClass("selected"),jQuery('.agent-weekly-calendar[data-agent-id="'+jQuery(this).data("agent-id")+'"]').addClass("selected"),!1})),jQuery(".calendar-view-wrapper").on("click",".daily-calendar-action-navigation-btn",(function(){return jQuery(this).addClass("os-loading"),jQuery('input[name="calendar_settings[target_date_string]"]').val(jQuery(this).data("target-date")).trigger("change"),!1})),jQuery(".calendar-view-wrapper").on("click",".daily-availability-calendar .os-day",(function(){return jQuery(".os-monthly-calendar-days-w .os-day.selected").removeClass("selected"),jQuery(this).addClass("selected"),jQuery('input[name="calendar_settings[target_date_string]"]').val(jQuery(this).data("date")).trigger("change"),!1})),jQuery(".os-calendar-today-btn").on("click",(function(){return jQuery(this).addClass("os-loading"),jQuery('input[name="calendar_settings[target_date_string]"]').val(jQuery(this).data("target-date")).trigger("change"),!1})),jQuery(".os-calendar-prev-btn").on("click",(function(){return jQuery(this).addClass("os-loading"),jQuery('input[name="calendar_settings[target_date_string]"]').val(jQuery('input[name="prev_target_date"]').val()).trigger("change"),!1})),jQuery(".os-calendar-next-btn").on("click",(function(){return jQuery(this).addClass("os-loading"),jQuery('input[name="calendar_settings[target_date_string]"]').val(jQuery('input[name="next_target_date"]').val()).trigger("change"),!1}))}function latepoint_reload_calendar_view(){var e=jQuery(".calendar-view-wrapper");if(e.length){e.addClass("os-loading");var t=new FormData(jQuery("form.os-calendar-settings-form")[0]),a=new FormData;a.append("params",latepoint_formdata_to_url_encoded_string(t)),a.append("action",latepoint_helper.route_action),a.append("route_name",e.data("route")),a.append("return_format","json"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:a,success:function t(a){"success"===a.status&&(e.html(a.message).removeClass("os-loading"),jQuery(".os-calendar-today-btn, .os-calendar-prev-btn, .os-calendar-next-btn").removeClass("os-loading"),jQuery(".os-current-month-label .current-month").text(a.top_date_label),latepoint_check_horizontal_calendar_scroll())}})}}function latepoint_process_updated(){location.reload()}function latepoint_process_action_removed(e){e.closest(".os-form-block").remove()}function latepoint_replace_process_condition_element(e,t,a,o){var n=arguments.length>3&&void 0!==o?o:null,i=e.data("route"),r={action:latepoint_helper.route_action,route_name:i,params:t,return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:r,success:function e(t){t.status===latepoint_helper.response_status.success?(a.html(t.message),latepoint_init_process_conditions_form(),"function"==typeof n&&n()):alert("Error!")}})}function latepoint_init_process_forms(){latepoint_init_process_conditions_form(),jQuery(".os-processes-w").on("click",".os-run-process",(function(){var e=jQuery(this);e.addClass("os-loading");var t=e.closest(".os-process-form");jQuery(".os-process-form.prepared-to-run").removeClass("prepared-to-run"),t.addClass("prepared-to-run");var a=new FormData(t[0]);a.set("process_event_type",t.closest(".os-process-form").find(".process-event-type-selector").val());var o=new FormData;return o.append("params",latepoint_formdata_to_url_encoded_string(a)),o.append("action",latepoint_helper.route_action),o.append("route_name",e.data("route")),o.append("return_format","json"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:o,success:function t(a){latepoint_show_data_in_lightbox(a.message,"width-800"),latepoint_init_process_test_form(),e.removeClass("os-loading")}}),!1})),jQuery(".os-processes-w").find(".process-action-form").each((function(e){latepoint_init_process_action_form(jQuery(this))})),jQuery(".os-processes-w").on("click",".pe-remove-condition",(function(e){return jQuery(e.currentTarget).closest(".pe-conditions").find(".pe-condition").length>1?jQuery(e.currentTarget).closest(".pe-condition").remove():alert("You need to have at least one condition if your custom field is set to be conditional."),!1})),jQuery(".os-processes-w").on("change","select.process-condition-operator-selector",(function(e){var t=jQuery(e.currentTarget);"changed"==t.val()||"not_changed"==t.val()?t.closest(".pe-condition").find(".process-condition-values-w").hide():t.closest(".pe-condition").find(".process-condition-values-w").show()})),jQuery(".os-processes-w").on("change","select.process-event-type-selector",(function(e){var t=jQuery(e.currentTarget);latepoint_replace_process_condition_element(t,{event_type:t.val()},t.closest(".os-form-block").find(".process-event-condition-wrapper"))})),jQuery(".os-processes-w").on("change","select.process-condition-object-selector",(function(e){var t=jQuery(e.currentTarget),a=t.closest(".pe-condition").find(".process-condition-properties-w select");latepoint_replace_process_condition_element(t,{object_code:t.val()},a,(function(){a.trigger("change")}))})),jQuery(".os-processes-w").on("change","select.process-condition-property-selector",(function(e){var t=jQuery(e.currentTarget),a=t.closest(".pe-condition").find(".process-condition-operators-w select");latepoint_replace_process_condition_element(t,{property:t.val()},a,(function(){a.trigger("change")}))})),jQuery(".os-processes-w").on("change","select.process-condition-operator-selector",(function(e){var t=jQuery(e.currentTarget);latepoint_replace_process_condition_element(t,{property:t.closest(".pe-condition").find("select.process-condition-property-selector").val(),trigger_condition_id:t.closest(".pe-condition").data("condition-id"),operator:t.val()},t.closest(".pe-condition").find(".process-condition-values-w"))}))}function latepoint_init_process_conditions_form(){jQuery(".os-late-select").lateSelect()}function latepoint_add_process_condition(e,t){e.closest(".pe-condition").after(t.message),latepoint_init_process_conditions_form()}function latepoint_init_added_process_action_form(e){var t=e.prev(".process-action-form");t.addClass("is-editing"),latepoint_init_process_action_form(t)}function latepoint_init_process_test_form(){jQuery(".latepoint-run-process-btn").on("click",(function(){var e=jQuery(this);if(e.hasClass("os-loading"))return!1;e.addClass("os-loading");var t=jQuery(".latepoint-lightbox-content .action-settings-wrapper"),a=new FormData(jQuery(".os-process-form.prepared-to-run")[0]);jQuery(".process-test-data-source-selector").each((function(){a.set(jQuery(this).prop("name"),jQuery(this).val())})),jQuery(".process-test-data-source-selector").each((function(){a.set(jQuery(this).prop("name"),jQuery(this).val())}));var o=[];jQuery('.action-to-run input[type="hidden"]').each((function(){"on"==jQuery(this).val()&&o.push(jQuery(this).closest(".action-to-run").data("id"))})),a.set("action_ids",o.join(","));var n=new FormData;n.append("params",latepoint_formdata_to_url_encoded_string(a)),n.append("action",latepoint_helper.route_action),n.append("route_name",e.data("route")),
n.append("return_format","json"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:n,success:function t(a){e.removeClass("os-loading"),"success"==a.status?latepoint_add_notification(a.message):latepoint_add_notification(a.message,"error")}})})),jQuery(".process-action-test-data-source-selector").on("change",(function(){}))}function latepoint_init_process_action_test_form(){latepoint_init_json_view(jQuery(".action-preview-wrapper.type-trigger_webhook pre")),jQuery(".latepoint-run-action-btn").on("click",(function(){var e=jQuery(this);if(e.hasClass("os-loading"))return!1;e.addClass("os-loading");var t=jQuery(".latepoint-lightbox-content .action-settings-wrapper"),a=new FormData;a.append("params",t.find("select, textarea, input").serialize()),a.append("action",latepoint_helper.route_action),a.append("route_name",e.data("route")),a.append("return_format","json"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"==a.status?latepoint_add_notification(a.message):latepoint_add_notification(a.message,"error")}})})),jQuery(".process-action-test-data-source-selector").on("change",(function(){var e=jQuery(this);jQuery(".action-preview-wrapper").addClass("os-loading");var t=e.closest(".action-settings-wrapper"),a=new FormData;a.append("params",t.find("select, textarea, input").serialize()),a.append("action",latepoint_helper.route_action),a.append("route_name",e.data("route")),a.append("return_format","json"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:a,success:function e(t){jQuery(".action-preview-wrapper").html(t.message).removeClass("os-loading"),latepoint_init_json_view(jQuery(".action-preview-wrapper.type-trigger_webhook pre"))}})}))}function latepoint_init_process_action_form(e){e.on("click",".os-run-process-action",(function(){var e=jQuery(this);e.addClass("os-loading");var t=e.closest(".process-action-form");void 0!==window.tinyMCE&&window.tinyMCE.triggerSave();var a=new FormData,o=latepoint_create_form_data_from_non_form_element(t);return o.set("process_event_type",t.closest(".os-process-form").find(".process-event-type-selector").val()),a.append("params",latepoint_formdata_to_url_encoded_string(o)),a.append("action",latepoint_helper.route_action),a.append("route_name",e.data("route")),a.append("return_format","json"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:a,success:function t(a){latepoint_show_data_in_lightbox(a.message,"width-800"),latepoint_init_process_action_test_form(),e.removeClass("os-loading")}}),!1})),e.on("click",".process-action-heading",(function(){return jQuery(this).closest(".process-action-form").toggleClass("is-editing"),!1})),e.on("change",".process-action-type",(function(){jQuery(this).closest(".process-action-form").find(".process-action-name").text(jQuery(this).find("option:selected").text())})),e.find("textarea.os-wp-editor-textarea").each((function(e){latepoint_init_tiny_mce(jQuery(this).attr("id"))})),e.on("click",".os-remove-process-action",(function(){return confirm(jQuery(this).data("os-prompt"))&&jQuery(this).closest(".process-action-form").remove(),!1})),e.on("change",".process-action-type",(function(){var e=jQuery(this),t=e.val(),a=e.data("action-id"),o=e.data("route"),n={action:latepoint_helper.route_action,route_name:o,params:{action_type:t,action_id:a},layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){e.closest(".process-action-content").find(".process-action-settings").html(a.message),latepoint_init_input_masks(e.closest(".process-action-form"))}}),!1}))}!function($){jQuery.fn.lateSelect=function(){function e(e){var t="";return e.data("quantity")&&(t='<span class="os-late-quantity-selector-w"><span class="os-late-quantity-selector minus" data-sign="minus"></span><input class="os-late-quantity-selector-input" type="text" data-max-quantity="'+e.data("max-quantity")+'" value="'+e.data("quantity")+'"/><span class="os-late-quantity-selector plus" data-sign="plus"></span></span>'),'<div class="ls-item" data-value="'+e.val()+'"><span class="latepoint-icon latepoint-icon-cross ls-item-remover"></span><span>'+e.text()+"</span>"+t+"</div>"}this.each((function(){var t="",a="",o="",n="";if(!jQuery(this).hasClass("os-late-select-active")){jQuery(this).hide().addClass("os-late-select-active"),jQuery(this).find("option").each((function(){jQuery(this).is(":selected")&&(o+=e(jQuery(this))),n=jQuery(this).is(":selected")?"selected":"",a+='<div class="ls-item '+n+'" data-value="'+jQuery(this).val()+'">'+jQuery(this).text()+"</div>"}));var i='<div class="ls-placeholder">'+jQuery(this).data("placeholder")+"</div>";t=jQuery('<div class="lateselect-w"></div>'),jQuery(this).wrap(t);var r=jQuery(this).closest(".lateselect-w");r.append('<div class="ls-selected-items-w">'+i+o+"</div>"),r.append('<div class="ls-all-items-w">'+a+"</div>"),r.on("click",".ls-all-items-w .ls-item:not(.selected)",(function(){var t=jQuery(this).data("value");return r.find(".ls-selected-items-w").append(e(r.find('select option[value="'+t+'"]'))),jQuery(this).addClass("selected"),r.removeClass("ls-selecting"),r.find('select option[value="'+t+'"]').prop("selected",!0),r.find("select").trigger("change"),!1})),r.on("click",".ls-selected-items-w .ls-item-remover",(function(){var e=jQuery(this).closest(".ls-item").data("value");return jQuery(this).closest(".ls-item").remove(),r.find('.ls-all-items-w .ls-item.selected[data-value="'+e+'"]').removeClass("selected"),r.find('select option[value="'+e+'"]').prop("selected",!1),r.find("select").trigger("change"),!1})),r.on("click",".ls-selected-items-w",(function(){return r.toggleClass("ls-selecting"),!1})),r.on("click",".os-late-quantity-selector",(function(){var e=jQuery(this).closest(".ls-item").find("input.os-late-quantity-selector-input"),t=parseInt(e.val()),a="minus"==jQuery(this).data("sign")?t-1:t+1,o=e.data("max-quantity");a<=0&&(a=1),o&&a>o&&(a=o);var n=jQuery(this).closest(".ls-item").data("value");return r.find('select option[value="'+n+'"]').data("quantity",a),e.val(a),r.find("select").trigger("change"),!1})),jQuery(this).on("change",(function(){var e=!1;e=jQuery(this).data("hidden-connection")?jQuery(jQuery(this).data("hidden-connection")):jQuery(this).closest(".lateselect-w").next('input[type="hidden"]');var t="";jQuery(this).find("option:selected").length?jQuery(this).find("option:selected").each((function(){if(jQuery(this).data("quantity")){var e=jQuery(this).data("quantity")?jQuery(this).data("quantity"):1;t+=jQuery(this).val()+":"+e+","}else t+=jQuery(this).val()+","})):t="",""!=t&&(t=t.slice(0,-1)),e.val(t)}))}}))}}(jQuery),function($){jQuery.fn.lateCheckbox=function(){function e(e){var t=jQuery('.latecheckbox-w[data-latecheckbox-id="'+e+'"]');t.find(".latecheckbox-options-w").html(jQuery('.latecheckbox-options-w[data-latecheckbox-id="'+e+'"]').html());var a=t.find(".latecheckbox-options"),o=a.find('.latecheckbox-option input[type="checkbox"]:checked').length,n;o<a.find('.latecheckbox-option input[type="checkbox"]').length?t.find(".latecheckbox .filter-value").text(o):t.find(".latecheckbox .filter-value").text("All"),t.find('input[type="checkbox"][indeterminate="indeterminate"]').prop("indeterminate",!0).removeAttr("indeterminate"),t.find(".latecheckbox").trigger("change")}this.each((function(){var t=jQuery(this).closest(".latecheckbox-w");t.attr("data-latecheckbox-id","latecheckbox-"+latepoint_random_generator()),t.on("click",".latecheckbox",(function(){var a=jQuery(this);if(jQuery("body > .latecheckbox-options-w").remove(),jQuery(this).hasClass("is-active"))jQuery(this).removeClass("is-active");else{jQuery(".latecheckbox.is-active").removeClass("is-active"),jQuery(this).addClass("is-active");var o=jQuery(this).position(),n=o.left,i,r=t.find(".latecheckbox-options-w").clone();r.attr("data-latecheckbox-id",jQuery(this).closest(".latecheckbox-w").attr("data-latecheckbox-id")).appendTo("body"),n=n+jQuery(this).outerWidth()-r.outerWidth(),r.css({top:o.top+jQuery(this).outerHeight()+5,left:n}),r.find(".latecheckbox-filter-input").length&&r.find(".latecheckbox-filter-input").trigger("focus"),r.on("change",".latecheckbox-all-check",(function(){jQuery(this).is(":checked")?(jQuery(this).attr("checked","checked").removeAttr("indeterminate"),jQuery(this).closest(".latecheckbox-options-w").find('.latecheckbox-options input[type="checkbox"]').prop("checked",!0).prop("indeterminate",!1).attr("checked","checked")):(jQuery(this).removeAttr("checked").removeAttr("indeterminate"),jQuery(this).closest(".latecheckbox-options-w").find('.latecheckbox-options input[type="checkbox"]').prop("checked",!1).prop("indeterminate",!1).removeAttr("checked")),e(jQuery(this).closest(".latecheckbox-options-w").attr("data-latecheckbox-id"))})),r.on("change",".latecheckbox-group-check",(function(){jQuery(this).is(":checked")?(jQuery(this).attr("checked","checked").removeAttr("indeterminate"),jQuery(this).closest(".latecheckbox-group").find('.latecheckbox-group-options input[type="checkbox"]').prop("checked",!0).attr("checked","checked")):(jQuery(this).removeAttr("checked").removeAttr("indeterminate"),jQuery(this).closest(".latecheckbox-group").find('.latecheckbox-group-options input[type="checkbox"]').prop("checked",!1).removeAttr("checked")),e(jQuery(this).closest(".latecheckbox-options-w").attr("data-latecheckbox-id"))})),r.on("keyup",".latecheckbox-filter-input",(function(){var e=jQuery(this).val().toLowerCase();""==e?jQuery(this).closest(".latecheckbox-options-w").find(".latecheckbox-option.hidden").removeClass("hidden"):jQuery(this).closest(".latecheckbox-options-w").find(".latecheckbox-option").each((function(){var t;jQuery(this).text().toLowerCase().indexOf(e)>=0?jQuery(this).removeClass("hidden"):jQuery(this).addClass("hidden")}))})),r.on("change",'.latecheckbox-option input[type="checkbox"]',(function(){if(jQuery(this).is(":checked")?jQuery(this).attr("checked","checked"):jQuery(this).removeAttr("checked"),jQuery(this).closest(".latecheckbox-group-options").length){var t=jQuery(this).closest(".latecheckbox-group"),a=t.find(".latecheckbox-option input:checked").length,o=t.find(".latecheckbox-option input:not(:checked)").length;a&&o?(t.find(".latecheckbox-group-check").prop("indeterminate",!0).attr("indeterminate","indeterminate"),t.find(".latecheckbox-group-check").prop("checked",!1).removeAttr("checked")):(t.find(".latecheckbox-group-check").prop("indeterminate",!1).removeAttr("indeterminate"),a||t.find(".latecheckbox-group-check").prop("checked",!1).removeAttr("checked"),o||t.find(".latecheckbox-group-check").prop("checked",!0).attr("checked","checked"))}var n=r.find(".latecheckbox-option input:checked").length,i=r.find(".latecheckbox-option input:not(:checked)").length;n&&i?(r.find(".latecheckbox-all-check").prop("indeterminate",!0).attr("indeterminate","indeterminate"),r.find(".latecheckbox-all-check").prop("checked",!1).removeAttr("checked")):(r.find(".latecheckbox-all-check").prop("indeterminate",!1).removeAttr("indeterminate"),n||r.find(".latecheckbox-all-check").prop("checked",!1).removeAttr("checked"),i||r.find(".latecheckbox-all-check").prop("checked",!0).attr("checked","checked")),e(jQuery(this).closest(".latecheckbox-options-w").attr("data-latecheckbox-id"))}))}return!1}))}))}}(jQuery),jQuery((function($){$(".latepoint").find("[data-os-action-onload]").length&&$(".latepoint").find("[data-os-action-onload]").each((function(){var e=jQuery(this);e.addClass("os-loading");var t=e.data("os-params"),a=e.data("os-return-format")?e.data("os-return-format"):"json",o={action:"latepoint_route_call",route_name:e.data("os-action-onload"),params:t,return_format:a};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){e.removeClass("os-loading"),"success"===a.status&&"self"==e.data("os-output-target")&&e.html(a.message)}})})),$(".latepoint").on("click","button[data-os-action], a[data-os-action], div[data-os-action], span[data-os-action], tr[data-os-action]",(function(e){var t=jQuery(this);if(t.data("os-prompt")&&!confirm(t.data("os-prompt")))return!1;var a=t.data("os-params"),o;t.data("os-source-of-params")&&(a=latepoint_formdata_to_url_encoded_string(latepoint_create_form_data_from_non_form_element($(t.data("os-source-of-params")))));var n=t.data("os-return-format")?t.data("os-return-format"):"json",i={action:"latepoint_route_call",route_name:t.data("os-action"),params:a,return_format:n};return t.addClass("os-loading"),"side-panel"==t.data("os-output-target")&&($(".latepoint-side-panel-w").remove(),$("body").append('<div class="latepoint-side-panel-w os-loading"><div class="latepoint-side-panel-i"></div><div class="latepoint-side-panel-shadow"></div></div>')),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:i,success:function e(a){if("success"===a.status){if("lightbox"==t.data("os-output-target"))latepoint_show_data_in_lightbox(a.message,t.data("os-lightbox-classes"));else if("side-panel"==t.data("os-output-target"))$(".latepoint-side-panel-i").html(a.message),setTimeout((function(){$(".latepoint-side-panel-w").removeClass("os-loading")}),100);else{if("reload"==t.data("os-success-action"))return latepoint_add_notification(a.message),void location.reload();if("redirect"==t.data("os-success-action"))return void(t.data("os-redirect-to")?(latepoint_add_notification(a.message),window.location.replace(t.data("os-redirect-to"))):window.location.replace(a.message));if(t.data("os-output-target")&&$(t.data("os-output-target")).length)"append"==t.data("os-output-target-do")?$(t.data("os-output-target")).append(a.message):$(t.data("os-output-target")).html(a.message);else switch(t.data("os-before-after")){case"before":t.before(a.message);break;case"after":t.after(a.message);break;case"replace":t.replaceWith(a.message);break;case"none":break;default:latepoint_add_notification(a.message)}}if(t.data("os-after-call")){var o,n=!1;if((o=t.data("os-after-call")).includes(".")){var i=o.split(".");"function"!=typeof window[i[0]][i[1]]&&console.log(o+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[i[0]][i[1]](t,a):t.data("os-pass-this")?window[i[0]][i[1]](t):t.data("os-pass-response")?window[i[0]][i[1]](a):window[i[0]][i[1]]()}else"function"!=typeof window[o]&&console.log(o+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[o](t,a):t.data("os-pass-this")?window[o](t):t.data("os-pass-response")?window[o](a):window[o]()}t.removeClass("os-loading")}else if(t.removeClass("os-loading"),t.data("os-output-target")&&$(t.data("os-output-target")).length?$(t.data("os-output-target")).prepend(latepoint_generate_form_message_html(a.message,"error")):alert(a.message),t.data("os-after-call-error")){var o,n=!1;if((o=t.data("os-after-call-error")).includes(".")){var i=o.split(".");"function"!=typeof window[i[0]][i[1]]&&console.log(o+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[i[0]][i[1]](t,a):t.data("os-pass-this")?window[i[0]][i[1]](t):t.data("os-pass-response")?window[i[0]][i[1]](a):window[i[0]][i[1]]()}else"function"!=typeof window[o]&&console.log(o+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[o](t,a):t.data("os-pass-this")?window[o](t):t.data("os-pass-response")?window[o](a):window[o]()}}}),!1})),$(".latepoint").on("click",'form[data-os-action] button[type="submit"]',(function(e){$(this).addClass("os-loading")})),$(".latepoint").on("submit","form[data-os-action]",(function(e){e.preventDefault();var t=$(this),a=new FormData(t[0]);"intlTelInputGlobals"in window&&"intlTelInputUtils"in window&&t.find("input.os-mask-phone").each((function(){var e;if(window.intlTelInputGlobals.getInstance(this)){var t=this.getAttribute("name"),o=window.intlTelInputGlobals.getInstance(this).getNumber(window.intlTelInputUtils.numberFormat.E164);a.set(t,o)}}));var o={action:"latepoint_route_call",route_name:$(this).data("os-action"),params:latepoint_formdata_to_url_encoded_string(a),return_format:"json"};return t.find('button[type="submit"]').addClass("os-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(a){if(t.find('button[type="submit"].os-loading').removeClass("os-loading"),latepoint_clear_form_messages(t),"success"===a.status){if("reload"==t.data("os-success-action"))return latepoint_add_notification(a.message),void location.reload();if("redirect"==t.data("os-success-action"))return void(t.data("os-redirect-to")?(latepoint_add_notification(a.message),window.location.replace(t.data("os-redirect-to"))):window.location.replace(a.message));if(t.data("os-output-target")&&$(t.data("os-output-target")).length?$(t.data("os-output-target")).html(a.message):"redirect"==a.message?window.location.replace(a.url):(latepoint_add_notification(a.message),t.prepend(latepoint_generate_form_message_html(a.message,"success"))),t.data("os-record-id-holder")&&a.record_id&&t.find('[name="'+t.data("os-record-id-holder")+'"]').val(a.record_id),t.data("os-after-call")){var o=t.data("os-after-call");"function"!=typeof window[o]&&console.log(o+" is undefined"),t.data("os-pass-response")?window[o](a):window[o]()}$("button.os-loading").removeClass("os-loading")}else $("button.os-loading").removeClass("os-loading"),t.data("os-show-errors-as-notification")?latepoint_add_notification(a.message,"error"):(t.prepend(latepoint_generate_form_message_html(a.message,"error")),$([document.documentElement,document.body]).animate({scrollTop:t.find(".os-form-message-w").offset().top-30},200));a.form_values_to_update&&$.each(a.form_values_to_update,(function(e,a){t.find('[name="'+e+'"]').val(a)}))}}),!1}))})),jQuery(document).ready((function($){latepoint_check_for_updates(),jQuery("body").on("click",".addon-category-filter-trigger",(function(){if(jQuery(".addons-categories-wrapper .addon-category-filter-trigger.is-selected").removeClass("is-selected"),jQuery(this).data("category")){var e=jQuery(this).data("category").toString();jQuery(".addon-box").addClass("hidden"),jQuery(".addon-box").each((function(){jQuery(this).data("category").toString().split(",").includes(e)&&jQuery(this).removeClass("hidden")}))}else jQuery(".addon-box").removeClass("hidden");return jQuery(this).addClass("is-selected"),!1})),jQuery(".addons-info-holder").on("click",".os-addon-action-btn",(function(){var e=jQuery(this);e.addClass("os-loading");var t={action:"latepoint_route_call",route_name:e.data("route-name"),params:{addon_name:e.data("addon-name"),addon_path:e.data("addon-path")},layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:t,success:function t(a){e.removeClass("os-loading"),"success"===a.status?(latepoint_add_notification(a.message),latepoint_load_addons_info()):"404"==a.code?latepoint_show_data_in_lightbox(a.message):alert(a.message)}}),!1}))})),jQuery(document).ready((function($){latepoint_init_calendars(),latepoint_init_circles_charts(),latepoint_init_donut_charts(),latepoint_init_daily_bookings_chart(),latepoint_init_element_togglers(),latepoint_init_daterangepicker(jQuery(".os-date-range-picker")),latepoint_init_monthly_view(),latepoint_init_form_blocks(),latepoint_init_reminders_form(),latepoint_init_coupons_form(),latepoint_init_copy_on_click_elements(),latepoint_init_side_menu(),latepoint_init_color_picker(),latepoint_init_clickable_cells(),latepoint_init_input_masks(),latepoint_init_process_forms(),latepoint_init_sticky_side_menu(),latepoint_init_sortable_columns(),latepoint_init_accordions(),latepoint_init_default_form_fields_settings(),jQuery(document).on({mouseenter:function e(){var t=jQuery(this),a=t.offset();jQuery("body > .late-tooltip").remove();var o=jQuery("<div/>").addClass("late-tooltip").text(t.data("late-tooltip")).appendTo(jQuery("body"));return o.css("top",a.top-2),o.css("left",a.left+t.outerWidth()/2),!1},mouseleave:function e(){jQuery("body > .late-tooltip").remove()}},"[data-late-tooltip]"),jQuery("body").on("click",".booking-activity-log-panel-close",(function(){return jQuery(".booking-activity-log-panel-w").remove(),!1})),jQuery("#settings_list_of_phone_countries").on("change",(function(){jQuery(this).val()==latepoint_helper.value_all?jQuery(".select-phone-countries-wrapper").hide():jQuery(".select-phone-countries-wrapper").show()})),jQuery(".os-select-all-toggler").on("change",(function(){var e=jQuery(this).closest(".white-box").find(".os-complex-connections-selector .connection");return jQuery(this).is(":checked")?latepoint_complex_selector_select(e):latepoint_complex_selector_deselect(e),!1})),jQuery(".os-main-location-selector").on("change",(function(){var e=jQuery(this).data("route"),t="id="+jQuery(this).val(),a={action:latepoint_helper.route_action,route_name:e,params:t,layout:"none",return_format:"json"};jQuery(".latepoint-content-w").addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function e(t){location.reload()}})})),jQuery(".os-service-durations-w").on("click",".os-remove-duration",(function(){return jQuery(this).closest(".duration-box").slideUp(300,(function(){jQuery(this).remove()})),!1})),jQuery(".menu-color-toggler").on("click",(function(){return jQuery(".latepoint-side-menu-w").toggleClass("dark"),!1})),jQuery(".latepoint-mobile-top-menu-trigger").on("click",(function(){return jQuery(this).closest(".latepoint-all-wrapper").toggleClass("os-show-mobile-menu"),jQuery(this).closest(".latepoint-all-wrapper").hasClass("os-show-mobile-menu")?jQuery(".latepoint-side-menu-w ul.side-menu > li.has-children > a").on("click",(function(){return jQuery(this).closest("li").toggleClass("menu-item-sub-open-mobile"),!1})):jQuery(".latepoint-side-menu-w ul.side-menu > li.has-children > a").off("click"),!1})),jQuery(".latepoint-mobile-top-search-trigger-cancel").on("click",(function(){return jQuery(this).closest(".latepoint-all-wrapper").removeClass("os-show-mobile-search"),!1})),jQuery(".latepoint-mobile-top-search-trigger").on("click",(function(){return jQuery(this).closest(".latepoint-all-wrapper").toggleClass("os-show-mobile-search"),jQuery(this).closest(".latepoint-all-wrapper").hasClass("os-show-mobile-search")&&jQuery(".latepoint-top-search").focus(),!1})),jQuery(".latepoint-top-bar-w").on("click",".top-user-info-toggler",(function(){return jQuery(".latepoint-user-info-dropdown").toggleClass("os-visible"),!1})),jQuery(".latepoint-content").on("click",".mobile-calendar-actions-trigger",(function(){return jQuery(this).closest(".calendar-mobile-controls").toggleClass("os-show-actions"),!1})),jQuery(".latepoint-content").on("click",".os-widget-header-actions-trigger",(function(){return jQuery(this).closest(".os-widget-header").toggleClass("os-show-actions"),!1})),jQuery(".latepoint-content").on("click",".mobile-table-actions-trigger",(function(){return jQuery(this).closest(".os-pagination-w").toggleClass("os-show-actions"),!1})),jQuery(".download-csv-with-filters").on("click",(function(){var e=jQuery(this).closest(".table-with-pagination-w").find(".os-table-filter").serialize();e+="&download=csv",jQuery(this).attr("href",this.href+"&"+e)})),jQuery("select.pagination-page-select").on("change",(function(){latepoint_filter_table(jQuery(this).closest(".table-with-pagination-w").find("table"),jQuery(this).closest(".pagination-page-select-w"),!1)})),jQuery("select.os-table-filter").on("change",(function(){latepoint_filter_table(jQuery(this).closest("table"),jQuery(this).closest(".os-form-group"))})),jQuery("input.os-table-filter").on("keyup",(function(){latepoint_filter_table(jQuery(this).closest("table"),jQuery(this).closest(".os-form-group"))})),jQuery(".customize-connection-btn").on("click",(function(){return jQuery(this).closest(".connection").toggleClass("show-customize-box"),!1})),jQuery(".connection-children-list").on("click","li",(function(){return jQuery(this).hasClass("active")?(jQuery(this).removeClass("active"),jQuery(this).find("input.connection-child-is-connected").val("no")):(jQuery(this).addClass("active"),jQuery(this).find("input.connection-child-is-connected").val("yes")),latepoint_count_active_connections(jQuery(this).closest(".connection")),!1})),jQuery(".display-toggler-control").on("change",(function(){var e=jQuery(this).data("toggler-group"),t=jQuery(this).val();return jQuery('.display-toggler-target[data-toggler-group="'+e+'"]').hide(),jQuery('.display-toggler-target[data-toggler-group="'+e+'"][data-toggler-key="'+t+'"]').show(),!1})),jQuery(".add-item-category-trigger").on("click",(function(){return jQuery(".add-item-category-box").toggle(),jQuery(".os-new-item-category-form-w").toggle(),!1})),jQuery(".latepoint-top-search").on("keyup",(function(e){var t=jQuery(this).closest(".latepoint-top-search-w");t.addClass("os-loading");var a=jQuery(this).val();if(27==e.keyCode)return t.removeClass("typing"),jQuery(".latepoint-top-search-results-w").html(""),jQuery(this).val(""),void t.removeClass("os-loading");if(""==a)return t.removeClass("typing"),jQuery(".latepoint-top-search-results-w").html(""),void t.removeClass("os-loading");var o=jQuery(this).data("route"),n="query="+a,i={action:latepoint_helper.route_action,route_name:o,params:n,layout:"none",return_format:"json"};t.addClass("typing"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:i,success:function e(a){t.hasClass("typing")&&(t.removeClass("os-loading"),"success"===a.status&&jQuery(".latepoint-top-search-results-w").html(a.message))}})})),jQuery(".add-custom-step-btn").on("click",(function(e){var t=jQuery(".empty-step-w .step-w").clone(),a="step_"+latepoint_random_text(6),o=jQuery(".steps-ordering-w .step-w").length;return t.find('input[name="step[name]"]').val(a),t.find('input[name="step[order_number]"]').val(o),t.addClass("editing").attr("data-step-name",a),jQuery(".steps-ordering-w").append(t),!1})),jQuery(".appointment-status-selector").on("click",(function(e){e.stopPropagation()})),jQuery(".latepoint-show-license-details").on("click",(function(e){return jQuery(this).closest(".active-license-info").find(".license-info-w").slideToggle(200),!1})),jQuery(".aba-button-w").on("click",(function(e){e.stopPropagation();var t=jQuery(this).hasClass("aba-approve")?latepoint_helper.approve_confirm:latepoint_helper.reject_confirm,a;confirm(t)&&jQuery(this).closest(".appointment-box-large").find(".appointment-status-selector select").val(jQuery(this).data("status")).change();return!1})),jQuery(".appointment-status-selector select").on("change",(function(e){var t=jQuery(this).closest(".appointment-status-selector"),a=t.data("route"),o=t.data("booking-id"),n=jQuery(this).val();jQuery(this).closest(".appointment-box-large").attr("class","appointment-box-large status-"+n);var i="id="+o+"&status="+n,r={action:latepoint_helper.route_action,route_name:a,params:i,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:r,success:function e(t){"success"===t.status?latepoint_add_notification(t.message):latepoint_add_notification(t.message,"error")}})})),jQuery("body").on("click",".open-template-variables-panel",(function(){return jQuery(".latepoint-template-variables").toggleClass("is-visible"),!1})),jQuery("body").on("click",".close-template-variables-panel",(function(){return jQuery(".latepoint-template-variables").removeClass("is-visible"),!1})),jQuery("body").on("click",".open-layout-template-variables-panel",(function(){return jQuery(".latepoint-layout-template-variables").toggleClass("is-visible"),!1})),jQuery("body").on("click",".close-layout-template-variables-panel",(function(){return jQuery(".latepoint-layout-template-variables").removeClass("is-visible"),!1})),jQuery("body").on("click",".os-notifications .os-notification-close",(function(){return jQuery(this).closest(".item").remove(),!1})),jQuery("body").on("keyup",".os-form-group .os-form-control",(function(){jQuery(this).val()?jQuery(this).closest(".os-form-group").addClass("has-value"):jQuery(this).closest(".os-form-group").removeClass("has-value")})),jQuery(".os-wizard-setup-w, .latepoint-settings-w, .custom-schedule-wrapper").on("click",".ws-head",(function(){var e=jQuery(this).closest(".weekday-schedule-w");e.toggleClass("is-editing").removeClass("day-off"),e.find(".os-toggler").removeClass("off"),e.find("input.is-active").val(1)})),jQuery(".latepoint").on("click",".wizard-add-edit-item-trigger",(function(e){jQuery(this).addClass("os-loading");var t=jQuery(this).data("route"),a={};jQuery(this).data("id")&&(a.id=jQuery(this).data("id"));var o={action:latepoint_helper.route_action,route_name:t,params:a,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(t){jQuery(".wizard-add-edit-item-trigger.os-loading").removeClass("os-loading"),"success"===t.status&&(jQuery(".os-wizard-step-content-i").html(t.message),jQuery(".os-wizard-setup-w").addClass("is-sub-editing"),jQuery(".os-wizard-footer").hide(),latepoint_init_wizard_content())}})})),jQuery(".latepoint").on("click",".os-wizard-next-btn",(function(){var e=jQuery(this);e.addClass("os-loading");var t,a="current_step="+jQuery("#wizard_current_step").val();jQuery(".os-wizard-setup-w form.weekday-schedules-w").length&&(a+="&"+jQuery(".os-wizard-setup-w form.weekday-schedules-w .weekday-schedule-w:not(.day-off) input").serialize());var o={action:latepoint_helper.route_action,route_name:jQuery(this).data("route-name"),params:a,layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){e.removeClass("os-loading"),"success"===a.status&&(jQuery("#wizard_current_step").val(a.step_name),jQuery(".os-wizard-setup-w").attr("class","os-wizard-setup-w step-"+a.step_name),jQuery(".os-wizard-step-content").html(a.message),latepoint_init_wizard_content(),a.show_prev_btn?jQuery(".os-wizard-prev-btn").show():jQuery(".os-wizard-prev-btn").hide(),a.show_next_btn?jQuery(".os-wizard-next-btn").show():jQuery(".os-wizard-next-btn").hide(),a.show_next_btn||a.show_prev_btn?jQuery(".os-wizard-footer").show():jQuery(".os-wizard-footer").hide())}}),!1})),jQuery(".latepoint").on("click",".os-wizard-prev-btn",(function(){var e=jQuery(this);e.addClass("os-loading");var t,a="current_step="+jQuery("#wizard_current_step").val(),o={action:latepoint_helper.route_action,route_name:jQuery(this).data("route-name"),params:a,layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){e.removeClass("os-loading"),"success"===a.status&&(jQuery("#wizard_current_step").val(a.step_name),jQuery(".os-wizard-setup-w").attr("class","os-wizard-setup-w step-"+a.step_name),jQuery(".os-wizard-step-content").html(a.message),latepoint_init_wizard_content(),a.show_prev_btn?jQuery(".os-wizard-prev-btn").show():jQuery(".os-wizard-prev-btn").hide(),a.show_next_btn?jQuery(".os-wizard-next-btn").show():jQuery(".os-wizard-next-btn").hide(),a.show_next_btn||a.show_prev_btn?jQuery(".os-wizard-footer").show():jQuery(".os-wizard-footer").hide())}}),!1})),jQuery(".latepoint-content-w").on("change",".os-widget .os-trigger-reload-widget",(function(){latepoint_reload_widget(jQuery(this).closest(".os-widget"))})),jQuery(".latepoint-content-w").on("click",".os-widget .timeline-type-toggle .timeline-type-option",(function(){jQuery(this).closest(".timeline-type-toggle").find(".timeline-type-option.active").removeClass("active"),jQuery(this).addClass("active"),jQuery(".timeline-and-availability-contents").removeClass("shows-appointments shows-availability").addClass("shows-"+jQuery(this).data("value")),jQuery("#"+jQuery(this).closest(".timeline-type-toggle").data("value-holder-id")).val(jQuery(this).data("value"))})),
dragula([].slice.apply(document.querySelectorAll(".os-categories-ordering-w .os-category-children")),{moves:function e(t,a,o){return o.classList.contains("os-category-drag")||o.classList.contains("os-category-item-drag")}}).on("drop",(function(e){var t=jQuery(".os-categories-ordering-w"),a=[],o=[];t.find(".os-category-parent-w").each((function(e){var t=jQuery(this).index()+1,o=jQuery(this).parent().closest(".os-category-parent-w").data("id")||0;a.push({id:jQuery(this).data("id"),order_number:t,parent_id:o})})),t.find(".item-in-category-w").each((function(e){var t=jQuery(this).index()+1,a=jQuery(this).closest(".os-category-parent-w").data("id")||0;o.push({id:jQuery(this).data("id"),order_number:t,category_id:a})})),latepoint_recalculate_items_count_in_category();var n={action:latepoint_helper.route_action,route_name:t.data("category-order-update-route"),params:{category_datas:a,item_datas:o},return_format:"json"};t.addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){t.removeClass("os-loading"),"success"===a.status||alert(a.message)}})})),dragula([jQuery(".os-draggable-form-blocks")[0]],{moves:function e(t,a,o){return o.classList.contains("os-form-block-drag")}}).on("drop",(function(e){var t={},a=jQuery(".os-draggable-form-blocks");a.find(".os-form-block").each((function(e){var a=jQuery(this).index()+1,o=jQuery(this).find(".os-form-block-id");o.length&&o.val()&&(t[o.val()]=a)}));var o={action:latepoint_helper.route_action,route_name:a.data("order-update-route"),params:{ordered_fields:t,fields_for:a.data("fields-for")},return_format:"json"};a.addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(t){a.removeClass("os-loading")}})})),dragula([jQuery(".steps-ordering-w")[0]],{moves:function e(t,a,o){return o.classList.contains("step-drag")}}).on("drop",(function(e){var t={},a=jQuery(".steps-ordering-w");a.find(".step-w").each((function(e){var a=jQuery(this).index()+1;jQuery(this).data("step-order-number",a),jQuery(this).find('input[name="step[order_number]"]').val(a),t[jQuery(this).data("step-name")]=a}));var o={action:latepoint_helper.route_action,route_name:a.data("step-order-update-route"),params:{steps:t},return_format:"json"};a.addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(t){a.removeClass("os-loading")}})})),jQuery("body.latepoint-admin").on("click",".os-category-edit-btn, .os-category-edit-cancel-btn, .os-category-w .os-category-name",(function(){return jQuery(this).closest(".os-category-w").toggleClass("editing"),!1})),jQuery("body.latepoint-admin").on("click",".step-edit-btn, .step-edit-cancel-btn, .step-w .step-head",(function(){return jQuery(this).closest(".step-w").toggleClass("editing"),!1})),jQuery("body.latepoint-admin").on("click",".agent-info-change-agent-btn",(function(){return jQuery(this).closest(".agent-info-w").removeClass("selected").addClass("selecting"),!1})),jQuery("body.latepoint-admin").on("click",".agent-info-change-agent-btn",(function(){return jQuery(this).closest(".agent-info-w").removeClass("selected").addClass("selecting"),!1})),jQuery("body.latepoint-admin").on("click",".customer-info-create-btn",(function(){return jQuery(this).closest(".customer-info-w").removeClass("selecting").addClass("selected"),!1})),jQuery("body.latepoint-admin").on("click",".customer-info-load-btn",(function(){return jQuery(this).closest(".customer-info-w").removeClass("selected").addClass("selecting").find(".customers-selector-search-input").focus(),!1})),jQuery("body.latepoint-admin").on("click",".customers-selector-cancel",(function(){return jQuery(this).closest(".customer-info-w").removeClass("selecting").addClass("selected "),jQuery(".customers-options-list .customer-option").show(),jQuery(".customers-selector-search-input").val(""),!1})),jQuery("body.latepoint-admin").on("click",".os-services-select-field-w .service-option-selected",(function(){var e=jQuery(this).closest(".os-services-select-field-w");return e.hasClass("active")?e.removeClass("active"):e.addClass("active").find("input").focus(),!1})),jQuery("body.latepoint-admin").on("click",".os-services-select-field-w service-option-selected",(function(){return!1})),jQuery("body.latepoint-admin").on("keyup",".service-options-filter-input",(function(){var e=jQuery(this).closest(".services-options-list"),t=jQuery(this).val().toLowerCase();return e.find(".service-option").hide(),e.find(".service-option").each((function(){-1!=jQuery(this).text().toLowerCase().indexOf(""+t)&&jQuery(this).show()})),!1})),jQuery(".calendar-week-agent-w").on("click",".calendar-load-target-date",(function(e){return jQuery(this).addClass("os-loading"),latepoint_reload_week_view_calendar(jQuery(this).data("target-date")),!1})),jQuery(".calendar-week-agent-w").on("change",".cc-availability-toggler #overlay_service_availability",(function(e){"on"==jQuery(this).val()?jQuery(".calendar-week-agent-w .cc-service-selector").show():jQuery(".calendar-week-agent-w .cc-service-selector").hide(),latepoint_reload_week_view_calendar()})),jQuery(".calendar-week-agent-w").on("change",".trigger-weekly-calendar-reload",(function(e){return latepoint_reload_week_view_calendar(),!1})),jQuery(".latepoint-admin").on("click",".os-complex-connections-selector .selector-trigger",(function(){var e=jQuery(this).closest(".connection");return e.hasClass("active")?(latepoint_complex_selector_deselect(e),jQuery(this).closest(".white-box").find(".os-select-all-toggler").prop("checked",!1)):latepoint_complex_selector_select(e),!1})),jQuery(".latepoint-admin").on("click",".os-agents-selector .agent",(function(){return jQuery(this).hasClass("active")?(jQuery(this).removeClass("active"),jQuery(this).find(".connection-child-is-connected").val("no")):(jQuery(this).addClass("active"),jQuery(this).find(".connection-child-is-connected").val("yes")),!1})),jQuery(".latepoint-admin").on("click",".os-services-selector .service",(function(){return jQuery(this).hasClass("active")?(jQuery(this).removeClass("active"),jQuery(this).find(".connection-child-is-connected").val("no")):(jQuery(this).addClass("active"),jQuery(this).find(".connection-child-is-connected").val("yes")),!1})),jQuery(".latepoint-admin").on("click",".os-form-toggler-group",(function(e){return jQuery(this).find(".os-toggler").trigger("click"),!1})),jQuery(".latepoint-admin").on("click",".os-toggler",(function(e){var t=jQuery(this);if(t.data("confirm")&&!confirm(t.data("confirm")))return!1;if(t.hasClass("on")?t.removeClass("on").addClass("off"):t.removeClass("off").addClass("on"),t.data("for"))if(t.hasClass("os-toggler-radio")){var a=jQuery("#"+t.data("for"));jQuery('input[type="radio"][name="'+a.prop("name")+'"]:checked').each((function(e){var t=jQuery(this).prop("checked",!1).closest(".os-toggler-w").find(".os-toggler.on").removeClass("on").addClass("off").data("controlled-toggle-id");jQuery("#"+t).hide(),console.log("unchecked")})),a.prop("checked",!t.hasClass("off"))}else{var o=jQuery('input[type="hidden"]#'+t.data("for"));o.length?t.data("is-string-value")?o.val(t.hasClass("off")?"off":"on").trigger("change"):o.val(t.hasClass("off")?0:1).trigger("change"):jQuery("#"+t.data("for")).prop("checked",!t.hasClass("off"))}return t.data("controlled-toggle-id")&&(t.hasClass("off")?jQuery("#"+t.data("controlled-toggle-id")).hide():jQuery("#"+t.data("controlled-toggle-id")).show()),t.trigger("ostoggler:toggle"),!1})),jQuery(".latepoint-admin").on("click",".os-image-selector-trigger",(function(e){var t;e.preventDefault();var a=jQuery(this),o=jQuery(this).closest(".os-image-selector-w"),n=o.find(".os-image-container"),i=o.find(".os-image-id-holder"),r;if(n.find("img").length)i.val(""),n.removeClass("has-image"),n.html(""),a.find(".os-text-holder").text(a.data("label-set-str"));else{if(t)return t.open(),!1;(t=wp.media({title:"Select or Upload Media",button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();n.append('<img src="'+e.url+'" alt=""/>'),i.val(e.id),n.addClass("has-image"),a.find(".os-text-holder").text(a.data("label-remove-str"))})),t.open()}return!1})),jQuery("body").on("click",".latepoint-lightbox-close",(function(){return latepoint_lightbox_close(),!1})),jQuery("body").on("click",".latepoint-side-panel-close-trigger",(function(){return jQuery(".latepoint-side-panel-w").remove(),!1})),jQuery("body").on("click",".latepoint-quick-availability-close",(function(){return jQuery(".quick-availability-per-day-w").remove(),!1})),jQuery("body.latepoint-admin").on("click",".time-ampm-select",(function(){jQuery(this).closest(".time-ampm-w").find(".active").removeClass("active"),jQuery(this).addClass("active");var e=jQuery(this).data("ampm-value");return jQuery(this).closest(".os-time-group").find(".ampm-value-hidden-holder").val(e),jQuery(this).closest(".quick-start-time-w").length&&(latepoint_set_booking_end_time(),latepoint_is_next_day()),!1})),jQuery("body.latepoint-admin").on("click",".latepoint-lightbox-shadow",(function(){return latepoint_lightbox_close(),!1})),jQuery("body.latepoint-admin").on("click",".latepoint-side-panel-shadow",(function(){return jQuery(".latepoint-side-panel-w").remove(),!1})),jQuery("body.latepoint-admin").on("click",".ws-period-remove",(function(e){return jQuery(this).closest(".ws-period").remove(),!1})),jQuery(".latepoint-admin").on("click",".weekday-schedule-w .os-toggler",(function(e){return jQuery(this).hasClass("off")?jQuery(this).closest(".weekday-schedule-w").addClass("day-off").removeClass("is-editing").find("input.is-active").val(0):jQuery(this).closest(".weekday-schedule-w").removeClass("day-off").addClass("is-editing").find("input.is-active").val(1),!1}))}));