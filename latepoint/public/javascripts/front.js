"use strict";function latepoint_is_timeframe_in_periods(e,t,a,n){for(var o=arguments.length>3&&void 0!==n&&n,s=0;s<a.length;s++){var i=0,l=0,r=0,d=0,p=a[s].split(":");if(2==p.length?(i=p[0],l=p[1]):(r=p[2],d=p[3],i=parseFloat(p[0])-parseFloat(r),l=parseFloat(p[1])+parseFloat(d)),o){if(latepoint_is_period_inside_another(e,t,i,l))return!0}else if(latepoint_is_period_overlapping(e,t,i,l))return!0}return!1}function latepoint_is_period_overlapping(e,t,a,n){return e<n&&a<t}function latepoint_is_period_inside_another(e,t,a,n){return e>=a&&t<=n}function latepoint_minutes_to_hours_preferably(e){var t=latepoint_is_army_clock(),a=Math.floor(e/60);!t&&a>12&&(a-=12);var n=e%60;return n>0&&(a=a+":"+n),a}function latepoint_minutes_to_hours(e){var t=latepoint_is_army_clock(),a=Math.floor(e/60);return!t&&a>12&&(a-=12),a}function latepoint_am_or_pm(e){return latepoint_is_army_clock()?"":e<720||1440==e?"am":"pm"}function latepoint_hours_and_minutes_to_minutes(e,t){var a=e.split(":"),n=a[0],o=a[1];return"pm"==t&&n<12&&(n=parseInt(n)+12),"am"==t&&12==n&&(n=0),o=parseInt(o)+60*n}function latepoint_get_time_system(){return latepoint_helper.time_system}function latepoint_is_army_clock(){return"24"==latepoint_get_time_system()}function latepoint_minutes_to_hours_and_minutes(e,t){var a=latepoint_is_army_clock(),n=arguments.length>1&&void 0!==t?t:"%02d:%02d",o=Math.floor(e/60);!a&&o>12&&(o-=12),a||0!=o||(o=12);var e=e%60;return sprintf(n,o,e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,s,i,l=[],r=!0,d=!1;try{if(s=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;r=!1}else for(;!(r=(n=s.call(a)).done)&&(l.push(n.value),l.length!==t);r=!0);}catch(e){d=!0,o=e}finally{try{if(!r&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function e(){};return{s:o,n:function t(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!0,i=!1,l;return{s:function t(){a=a.call(e)},n:function e(){var t=a.next();return s=t.done,t},e:function e(t){i=!0,l=t},f:function e(){try{s||null==a.return||a.return()}finally{if(i)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function latepoint_random_generator(){var e=function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function latepoint_validate_form(e){var t=[];return e.find("select[data-os-validate], input[data-os-validate], textarea[data-os-validate]").each((function(){var e=jQuery(this).data("os-validate").split(" "),a=jQuery(this),n=a.closest(".os-form-group").find("label").text(),o=!1;if(e)for(var s=0;s<e.length;s++)switch(e[s]){case"presence":a.val()||(t.push({message:n+" "+latepoint_helper.msg_validation_presence}),o=!0);break;case"phone":window.intlTelInputGlobals.getInstance(a[0]).isValidNumber()||(t.push({message:n+" "+latepoint_helper.msg_validation_invalid}),o=!0);break}o?a.closest(".os-form-group").addClass("os-invalid"):a.closest(".os-form-group").removeClass("os-invalid")})),t}function latepoint_create_form_data_from_non_form_element(e){var t=new FormData,a=e.find("select, input, textarea").serializeArray();return a&&a.forEach((function(e){return t.append(e.name,e.value)})),t}function latepoint_create_form_data_from_booking_form(e,t,a){var n=arguments.length>1&&void 0!==t&&t,o=arguments.length>2&&void 0!==a&&a,s=new FormData,i=new FormData(e[0]),l;return o&&Object.keys(o).forEach((function(e){i.set(e,o[e])})),"intlTelInputGlobals"in window&&"intlTelInputUtils"in window&&e.find("input.os-mask-phone").each((function(){var e=this.getAttribute("name"),t=window.intlTelInputGlobals.getInstance(this).getNumber(window.intlTelInputUtils.numberFormat.E164);i.set(e,t)})),s.append("params",latepoint_formdata_to_url_encoded_string(i)),s.append("action",latepoint_helper.route_action),s.append("route_name",n||e.data("route-name")),s.append("layout","none"),s.append("return_format","json"),e.find('input[type="file"]').each((function(){l=this.files;for(var e=this.getAttribute("name"),t=0;t<l.length;t++)s.append(e+"[]",l[t])})),s}function latepoint_mask_timefield(e){jQuery().inputmask&&e.inputmask({mask:"99:99",placeholder:"HH:MM"})}function latepoint_formdata_to_url_encoded_string(e){var t=new FormData,a=_createForOfIteratorHelper(e),n;try{for(a.s();!(n=a.n()).done;){var o=_slicedToArray(n.value,2),s=o[0],i=o[1];i instanceof File||("[]"===s.slice(-2)?t.append(s,i):t.set(s,i))}}catch(e){a.e(e)}finally{a.f()}return new URLSearchParams(t).toString()}function latepoint_mask_percent(e){jQuery().inputmask&&e.inputmask({alias:"decimal",radixPoint:latepoint_helper.decimal_separator,digits:4,digitsOptional:!1,suffix:"%",placeholder:"0",rightAlign:!1})}function latepoint_mask_minutes(e){jQuery().inputmask&&e.inputmask({removeMaskOnSubmit:!0,alias:"numeric",digits:0,suffix:latepoint_helper.msg_minutes_suffix,placeholder:"0",rightAlign:!1})}function latepoint_mask_money(e){jQuery().inputmask&&e.inputmask({alias:"currency",groupSeparator:latepoint_helper.thousand_separator,radixPoint:latepoint_helper.decimal_separator,digits:latepoint_helper.number_of_decimals,digitsOptional:!1,prefix:latepoint_helper.currency_symbol_before?latepoint_helper.currency_symbol_before+" ":"",suffix:latepoint_helper.currency_symbol_after?" "+latepoint_helper.currency_symbol_after:"",placeholder:"0",rightAlign:!1})}function latepoint_mask_date(e){jQuery().inputmask&&e.inputmask({alias:"datetime",inputFormat:latepoint_helper.date_format_for_js})}function latepoint_init_phone_masking_from_placeholder(e){if(latepoint_helper.mask_phone_number_fields){var t=e.attr("placeholder");t&&jQuery().inputmask&&e.inputmask(t.replace(/[0-9]/g,9))}}function latepoint_mask_phone(e){var t=e[0];if(t&&!window.intlTelInputGlobals.getInstance(t)){var a=document.body,n=JSON.parse(latepoint_helper.included_phone_countries);1===n.length&&""===n[0]&&(n=[]);for(var o=n.length?[]:window.intlTelInputGlobals.defaults.preferredCountries,s=window.intlTelInputGlobals.getCountryData(),i=0;i<s.length;i++){var l=s[i];l.name=l.name.replace(/ *\([^)]*\) */g,"")}var r=latepoint_helper.default_phone_country,d;n.length&&!n.includes(r)&&(r=n[0]),window.intlTelInput(t,{dropdownContainer:a,formatOnDisplay:!0,nationalMode:!0,autoPlaceholder:"aggressive",initialCountry:r,geoIpLookup:function e(t){var a="latepoint_phone_country";latepoint_has_cookie(a)?t(latepoint_get_cookie(a)):jQuery.get("https://ipinfo.io",(function(){}),"jsonp").always((function(e){var n=r;e&&e.country&&(n=e.country.toLowerCase(),latepoint_set_cookie(a,n)),t(n)}))},allowDropdown:1!=n.length,onlyCountries:n,preferredCountries:o,separateDialCode:latepoint_helper.is_enabled_show_dial_code_with_flag}).promise.then((function(){latepoint_init_phone_masking_from_placeholder(e)})),e.on("countrychange",(function(e){latepoint_init_phone_masking_from_placeholder(jQuery(this))}))}}function latepoint_show_booking_end_time(){return"yes"==latepoint_helper.show_booking_end_time}function latepoint_set_cookie(e,t,a){var n=new Date;n.setTime(n.getTime()+864e5*a),document.cookie=e+"="+t+";path=/;expires="+n.toGMTString()}function latepoint_get_cookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function latepoint_has_cookie(e){return null!==latepoint_get_cookie(e)}function latepoint_delete_cookie(e){latepoint_set_cookie(e,"",-1)}function latepoint_add_notification(e,t){var a=arguments.length>1&&void 0!==t?t:"success",n=jQuery("body").find(".os-notifications");n.length||(jQuery("body").append('<div class="os-notifications"></div>'),n=jQuery("body").find(".os-notifications")),n.find(".item").length>0&&n.find(".item:first-child").remove(),n.append('<div class="item item-type-'+a+'">'+e+'<span class="os-notification-close"><i class="latepoint-icon latepoint-icon-x"></i></span></div>')}function latepoint_generate_form_message_html(e,t){var a='<div class="os-form-message-w status-'+t+'"><ul>';return Array.isArray(e)?e.forEach((function(e){a+="<li>"+e+"</li>"})):a+="<li>"+e+"</li>",a+="</ul></div>"}function latepoint_clear_form_messages(e){e.find(".os-form-message-w").remove()}function latepoint_show_data_in_lightbox(e,t){var a=arguments.length>1&&void 0!==t?t:"";jQuery(".latepoint-lightbox-w").remove();var n="latepoint-lightbox-w latepoint-w ";a&&(n+=a),jQuery("body").append('<div class="'+n+'"><div class="latepoint-lightbox-i">'+e+'<a href="#" class="latepoint-lightbox-close"><i class="latepoint-icon latepoint-icon-x"></i></a></div><div class="latepoint-lightbox-shadow"></div></div>'),jQuery("body").addClass("latepoint-lightbox-active")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function latepoint_manage_by_key_reload_booking(){var e=jQuery(".manage-booking-wrapper");e.addClass("os-loading");var t={key:e.data("key")},a={action:latepoint_helper.route_action,route_name:e.data("route-name"),params:t,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?e.replaceWith(a.message):latepoint_show_message_inside_element(a.message,e,"error")}})}function latepoint_init_manage_booking_by_key(){var e=jQuery(".manage-booking-wrapper");e.length&&(jQuery(".latepoint-w").on("change",".change-booking-status-trigger",(function(){e.addClass("os-loading");var t={key:e.data("key"),status:jQuery(this).val()},a={action:latepoint_helper.route_action,route_name:jQuery(this).closest(".change-booking-status-trigger-wrapper").data("route-name"),params:t,layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?latepoint_manage_by_key_reload_booking():latepoint_show_message_inside_element(a.message,e,"error")}}),!1})),e.on("click",".qr-show-trigger",(function(){return jQuery(this).closest(".manage-booking-wrapper").find(".qr-code-on-full-summary").addClass("show-vevent-qr-code"),!1})),e.on("click",".os-item-details-popup-close",(function(){var e=jQuery(this).closest(".manage-booking-wrapper");return e.find(".os-item-details-popup.open").remove(),e.find(".manage-booking-inner, .manage-booking-controls").show(),!1})),e.on("click",".os-trigger-item-details-popup",(function(){var e=jQuery(this).closest(".manage-booking-wrapper"),t;return e.find(".manage-booking-inner, .manage-booking-controls").hide(),e.find(".os-item-details-popup.open").remove(),e.find("#"+jQuery(this).data("item-details-popup-id")).clone().addClass("open").appendTo(e),!1})))}function latepoint_init_form_masks(){"intlTelInput"in window&&"intlTelInputGlobals"in window&&jQuery(".os-mask-phone").each((function(){latepoint_mask_phone(jQuery(this))}))}function latepoint_scroll_to_top_of_booking_form(e){e.parent().hasClass("latepoint-shortcode-booking-form"),e.parent().hasClass("latepoint-lightbox-i")&&e.find(".latepoint-body").scrollTop(0)}function latepoint_init_payment_method_actions(e,t){var a=[],n="yes"==e.data("next-submit-is-last");e.trigger("latepoint:initPaymentMethod",[{payment_method:t,callbacks_list:a,is_last_step:n}]),e.removeClass("step-content-loaded").addClass("step-content-loading");try{var o;(o=jQuery).when.apply(o,_toConsumableArray(a.map((function(e){return e.action()})))).done((function(){e.removeClass("step-content-loading").addClass("step-content-loaded").find('.lp-payment-method-content[data-payment-method="'+t+'"]').show()})).fail((function(t){latepoint_show_error_and_stop_loading_booking_form(t,e)}))}catch(t){latepoint_show_error_and_stop_loading_booking_form(t,e)}}function latepoint_lightbox_close(){jQuery("body").removeClass("latepoint-lightbox-active"),jQuery(".latepoint-lightbox-w").remove()}function latepoint_show_next_btn(e){e.find(".latepoint-next-btn").removeClass("disabled"),e.removeClass("hidden-buttons")}function clear_step_services(e){latepoint_reload_summary(e,"service",""),clear_sub_step_attendies(e)}function clear_sub_step_attendies(e){e.find(".latepoint_total_attendies").val(1),latepoint_reload_summary(e,"total-attendies",""),clear_sub_step_duration(e)}function clear_sub_step_duration(e){e.find(".latepoint_duration").val(""),latepoint_reload_summary(e,"duration","")}function clear_step_service_extras(e){latepoint_reload_summary(e,"service-extras","")}function clear_step_locations(e){latepoint_reload_summary(e,"location","")}function clear_step_agents(e){latepoint_reload_summary(e,"agent","")}function clear_step_datepicker(e){latepoint_reload_summary(e,"time",""),latepoint_reload_summary(e,"date","")}function latepoint_hide_next_btn(e){e.find(".latepoint-next-btn").addClass("disabled"),e.find(".latepoint-prev-btn.disabled").length&&e.addClass("hidden-buttons")}function latepoint_show_prev_btn(e){e.find(".latepoint-prev-btn").removeClass("disabled"),e.removeClass("hidden-buttons")}function latepoint_hide_prev_btn(e){e.find(".latepoint-prev-btn").addClass("disabled"),e.find(".latepoint-next-btn.disabled").length&&e.addClass("hidden-buttons")}function latepoint_show_capacity_selector(e){var t=e.closest(".latepoint-booking-form-element"),a=e.data("max-capacity"),n=e.data("min-capacity");t.find(".sta-sub-label span").text(a),t.find(".step-services-w").removeClass("selecting-service-duration"),t.find(".total-attendies-selector-w").data("max-capacity",a),t.find(".total-attendies-selector-w").data("min-capacity",n),e.closest(".step-services-w").addClass("selecting-total-attendies");var o=t.find(".total-attendies-selector-input").val();t.find(".total-attendies-selector-input").val(Math.max(Number(n),Number(o))),latepoint_show_prev_btn(t),latepoint_show_next_btn(t)}function latepoint_show_durations(e){var t=e.closest(".latepoint-booking-form-element");e.closest(".step-services-w").addClass("selecting-service-duration"),latepoint_show_prev_btn(t),latepoint_hide_next_btn(t)}function latepoint_apply_coupon(e){var t=e.closest(".latepoint-booking-form-element"),a=e;a.closest(".coupon-code-input-w").addClass("os-loading");var n=new FormData(t.find(".latepoint-form")[0]),o={action:latepoint_helper.route_action,route_name:e.data("route"),params:latepoint_formdata_to_url_encoded_string(n),layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(n){a.closest(".coupon-code-input-w").removeClass("os-loading"),"success"===n.status?(t.find('input[name="booking[coupon_code]"]').val(a.val()),latepoint_show_message_inside_element(n.message,t.find(".latepoint-body"),"success"),t.find('.step-payment-w input[name="booking[payment_method]"]').val(""),t.find('input[name="booking[payment_token]"]').val(""),t.find('input[name="booking[payment_portion]"]').val(""),latepoint_reload_step(t)):latepoint_show_message_inside_element(n.message,t.find(".latepoint-body"),"error")}})}function latepoint_remove_coupon(e){e.closest(".applied-coupon-code").fadeOut();var t=e.closest(".latepoint-booking-form-element");t.find('input[name="booking[coupon_code]"]').val(""),latepoint_reload_step(t)}function latepoint_reload_step(e,t){var a=arguments.length>1&&void 0!==t&&t;return a&&(e.find(".latepoint_current_step").val(a),e.removeClass((function(e,t){return(t.match(/(^|\s)current-step-\S+/g)||[]).join(" ")})).addClass("current-step-"+a),e.find('.latepoint-step-content[data-step-name="'+a+'"]')&&(e.find('.latepoint-step-content[data-step-name="'+a+'"]').nextAll(".latepoint-step-content").remove(),e.find('.latepoint-step-content[data-step-name="'+a+'"]').remove())),e.find(".latepoint_step_direction").val("specific"),e.find(".latepoint-form").trigger("submit"),!1}function latepoint_get_payment_sub_step(e,t,a){var n,o=arguments.length>2&&void 0!==a&&a?-1:1,s=[];e.find(".step-payment-w .lp-payment-times-w").length&&s.push("payment-times"),e.find(".step-payment-w .lp-payment-methods-w").length&&s.push("payment-methods"),e.find(".step-payment-w .lp-payment-portions-w").length&&s.push("payment-portions");var i=e.find('input[name="booking[payment_method]"]').val();i&&s.push("payment-method-content");var l=s.indexOf(t)+o;if(l>=0&&l<s.length){var r=s[l];return"payment-method-content"==r&&(latepoint_init_payment_method_actions(e,i),e.find('.lp-payment-method-content[data-payment-method="'+i+'"]').length||(r=t)),r}return t}function latepoint_reset_password_from_booking_init(){jQuery(".os-step-existing-customer-login-w").hide(),jQuery(".os-password-reset-form-holder").on("click",".password-reset-back-to-login",(function(){return jQuery(".os-password-reset-form-holder").html(""),jQuery(".os-step-existing-customer-login-w").show(),!1}))}function latepoint_reload_summary(e,t,a){var n=arguments.length>1&&void 0!==t?t:"",o=arguments.length>2&&void 0!==a?a:"",s=e.closest(".latepoint-with-summary");if(s.length){e.find(".latepoint-summary-w").addClass("os-loading");var i=e.find(".latepoint-form"),l=new FormData(i[0]),r={action:latepoint_helper.route_action,route_name:latepoint_helper.reload_booking_summary_route,params:latepoint_formdata_to_url_encoded_string(l),layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:r,success:function t(a){"success"===a.status&&(e.find(".os-summary-contents").html(a.message),e.find(".latepoint-summary-w").removeClass("os-loading"),s.addClass("latepoint-summary-is-open"))}})}}function latepoint_password_changed_show_login(e){jQuery(".os-step-existing-customer-login-w").show(),jQuery(".os-password-reset-form-holder").html(""),latepoint_show_message_inside_element(e.message,jQuery(".os-step-existing-customer-login-w"),"success")}function latepoint_hide_message_inside_element(e){var t=arguments.length>0&&void 0!==e?e:jQuery(".latepoint-body");t.length&&t.find(".latepoint-message").length&&t.find(".latepoint-message").remove()}function latepoint_show_message_inside_element(e,t,a){var n=arguments.length>1&&void 0!==t?t:jQuery(".latepoint-body"),o=arguments.length>2&&void 0!==a?a:"error";n.length&&(n.find(".latepoint-message").length?n.find(".latepoint-message").removeClass("latepoint-message-success").removeClass("latepoint-message-error").addClass("latepoint-message-"+o).html(e).show():n.prepend('<div class="latepoint-message latepoint-message-'+o+'">'+e+"</div>"))}function latepoint_add_action(e,t,a){var n=arguments.length>2&&void 0!==a?a:10;return e.push({priority:n,action:t}),e.sort((function(e,t){return e.priority-t.priority})),e}function latepoint_init_step(e,t){switch(latepoint_init_step_selectable_items(t),latepoint_init_step_category_items(e),e){case"datepicker":latepoint_init_step_datepicker(t);break;case"contact":latepoint_init_step_contact();break;case"agents":latepoint_init_step_agents();break;case"locations":latepoint_init_step_locations();break;case"services":latepoint_init_step_services();break;case"payment":latepoint_init_step_payment(t);break;case"verify":latepoint_init_step_verify(t);break;case"confirmation":latepoint_init_step_confirmation(t);break}t.trigger("latepoint:initStep",[{step_name:e}]),t.trigger("latepoint:initStep:"+e),latepoint_scroll_to_top_of_booking_form(t)}function day_timeslots(e,t,a){var n=arguments.length>1&&void 0!==t&&t,o=arguments.length>2&&void 0!==a&&a;n||(n=e.closest(".latepoint-booking-form-element")),e.addClass("selected");var s=e.data("service-duration"),i=e.data("interval"),l=e.data("work-start-time"),r=e.data("work-end-time"),d=e.data("total-work-minutes"),p=[],c=[];if(e.attr("data-bookable-minutes"))if(e.data("bookable-minutes").toString().indexOf(":")>-1)for(var u=e.data("bookable-minutes").toString().split(","),_=0;_<u.length;_++)p.push(parseInt(u[_].split(":")[0])),c.push(parseInt(u[_].split(":")[1]));else p=e.data("bookable-minutes").toString().split(",").map(Number);var m=e.data("work-minutes").toString().split(",").map(Number),f=n.find(".timeslots");if(f.html(""),d>0&&p.length&&m.length){var h=!1;m.forEach((function(e){var t=latepoint_am_or_pm(e),a="dp-timepicker-trigger",n=0;if("timeline"==latepoint_helper.time_pick_style?a+=" dp-timeslot":a+=" dp-timebox",!1!==h&&e-h>s){var o=latepoint_minutes_to_hours_and_minutes(h+s)+" "+latepoint_am_or_pm(h+s)+" - "+latepoint_minutes_to_hours_and_minutes(e)+" "+latepoint_am_or_pm(e),l=(e-h-s)/d*100;f.append('<div class="'+a+' is-off" style="max-width:'+l+"%; width:"+l+'%"><span class="dp-label">'+o+"</span></div>")}p.includes(e)?c.length&&(n=c[p.indexOf(e)]):a+=" is-booked";var r="",u="",_="",m="";(e%60==0||i>=60)&&(a+=" with-tick",r='<span class="dp-tick"><strong>'+latepoint_minutes_to_hours_preferably(e)+"</strong> "+t+"</span>");var y=latepoint_minutes_to_hours_and_minutes(e)+" "+t,g;if(latepoint_show_booking_end_time()){var v=e+s;v>1440&&(v-=1440);var b=latepoint_am_or_pm(v);y+=' - <span class="dp-label-end-time">'+latepoint_minutes_to_hours_and_minutes(v)+" "+b+"</span>"}n&&(_='<span class="dp-capacity">'+(u=n+" "+(n>1?latepoint_helper.many_spaces_message:latepoint_helper.single_space_message))+"</span>",m='<span class="dp-label-capacity">'+u+"</span>");y=y.trim(),f.removeClass("slots-not-available").append('<div class="'+a+'" data-minutes="'+e+'"><span class="dp-label">'+m+'<span class="dp-label-time">'+y+"</span></span>"+r+_+"</div>"),h=e}))}else f.addClass("slots-not-available").append('<div class="not-working-message">'+latepoint_helper.msg_not_available+"</div>");jQuery(".times-header-label span").text(e.data("nice-date")),n.find(".time-selector-w").slideDown(200,(function(){o||(o=n.find(".latepoint-body")),o.stop().animate({scrollTop:o[0].scrollHeight},200)}))}function latepoint_init_timeslots(e){var t=arguments.length>0&&void 0!==e&&e;t&&t.find(".time-selector-w").on("click",".dp-timepicker-trigger",(function(){if(jQuery(this).hasClass("is-booked")||jQuery(this).hasClass("is-off"));else if(jQuery(this).hasClass("selected"))jQuery(this).removeClass("selected"),jQuery(this).find(".dp-success-label").remove(),t.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(t),latepoint_reload_summary(t,"time","");else{t.find(".dp-timepicker-trigger.selected").removeClass("selected").find(".dp-success-label").remove();var e=jQuery(this).find(".dp-label-time").html();jQuery(this).addClass("selected").find(".dp-label").prepend('<span class="dp-success-label">'+t.find(".latepoint-form").data("selected-label")+"</span>");var a=parseInt(jQuery(this).data("minutes")),n=parseInt(t.find(".latepoint_timeshift_minutes").val());n&&(a-=n);var o=new Date(t.find(".os-day.selected").data("date"));a<0?(a=1440+a,o.setDate(o.getDate()-1)):a>=1440&&(a-=1440,o.setDate(o.getDate()+1)),t.find(".latepoint_start_date").val(o.toISOString().split("T")[0]),t.find(".latepoint_start_time").val(a),latepoint_trigger_next_btn(t),latepoint_reload_summary(t,"time",e)}return!1}))}function latepoint_init_monthly_calendar_navigation(e){var t=arguments.length>0&&void 0!==e&&e;t&&(t.find(".os-month-next-btn").on("click",(function(){var e=jQuery(this).closest(".latepoint-booking-form-element"),t=jQuery(this).data("route");if(e.find(".os-monthly-calendar-days-w.active + .os-monthly-calendar-days-w").length)e.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),latepoint_calendar_set_month_label(e);else if(1){var a=jQuery(this);a.addClass("os-loading");var n=e.find(".os-monthly-calendar-days-w").last(),o=n.data("calendar-year"),s=n.data("calendar-month");12==s?(o+=1,s=1):s+=1;var i=new FormData(e.find(".latepoint-form")[0]);i.set("target_date_string","".concat(o,"-").concat(s,"-1"));var l=latepoint_formdata_to_url_encoded_string(i),r={action:latepoint_helper.route_action,route_name:t,params:l,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:r,success:function t(n){a.removeClass("os-loading"),"success"===n.status&&(e.find(".os-months").append(n.message),e.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),latepoint_calendar_set_month_label(e))}})}return latepoint_calendar_show_or_hide_prev_next_buttons(e),!1})),t.find(".os-month-prev-btn").on("click",(function(){var e=jQuery(this).closest(".latepoint-booking-form-element");return e.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length&&(e.find(".os-monthly-calendar-days-w.active").removeClass("active").prev(".os-monthly-calendar-days-w").addClass("active"),latepoint_calendar_set_month_label(e)),latepoint_calendar_show_or_hide_prev_next_buttons(e),!1})))}function latepoint_calendar_set_month_label(e){e.find(".os-current-month-label .current-year").text(e.find(".os-monthly-calendar-days-w.active").data("calendar-year")),e.find(".os-current-month-label .current-month").text(e.find(".os-monthly-calendar-days-w.active").data("calendar-month-label"))}function latepoint_calendar_show_or_hide_prev_next_buttons(e){e.find(".os-current-month-label .current-year").text(e.find(".os-monthly-calendar-days-w.active .os-monthly-calendar-days").data("calendar-year")),e.find(".os-current-month-label .current-month").text(e.find(".os-monthly-calendar-days-w.active .os-monthly-calendar-days").data("calendar-month-label")),e.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length?e.find(".os-month-prev-btn").removeClass("disabled"):e.find(".os-month-prev-btn").addClass("disabled")}function latepoint_format_minutes_to_time(e,t){var a=latepoint_am_or_pm(e),n=latepoint_minutes_to_hours_and_minutes(e)+" "+a;if(latepoint_show_booking_end_time()){var o=e+t,s=latepoint_am_or_pm(o);n+=" - "+latepoint_minutes_to_hours_and_minutes(o)+" "+s}return n=n.trim()}function latepoint_init_step_datepicker(e){var t=arguments.length>0&&void 0!==e&&e;t&&(latepoint_init_timeslots(t),latepoint_init_monthly_calendar_navigation(t),t.find(".os-months").on("click",".os-day",(function(){if(jQuery(this).hasClass("os-day-passed"))return!1;if(jQuery(this).hasClass("os-not-in-allowed-period"))return!1;var e=jQuery(this).closest(".latepoint-booking-form-element");if(jQuery(this).closest(".os-monthly-calendar-days-w").hasClass("hide-if-single-slot"))if(jQuery(this).hasClass("os-not-available"));else if(e.find(".os-day.selected").removeClass("selected"),jQuery(this).addClass("selected"),e.find(".latepoint_start_date").val(jQuery(this).data("date")),latepoint_reload_summary(e,"date",jQuery(this).data("nice-date")),jQuery(this).hasClass("os-one-slot-only")){var t=jQuery(this).data("bookable-minutes").toString().split(":")[0],a=latepoint_format_minutes_to_time(Number(t),Number(jQuery(this).data("service-duration")));e.find(".latepoint_start_time").val(jQuery(this).data("bookable-minutes")),latepoint_show_next_btn(e),latepoint_reload_summary(e,"time",a),e.find(".time-selector-w").slideUp(200)}else day_timeslots(jQuery(this)),e.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(e);else e.find(".latepoint_start_date").val(jQuery(this).data("date")),latepoint_reload_summary(e,"date",jQuery(this).data("nice-date")),e.find(".os-day.selected").removeClass("selected"),jQuery(this).addClass("selected"),day_timeslots(jQuery(this)),latepoint_reload_summary(e,"time",""),e.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(e);return!1})))}function latepoint_init_step_verify(e){var t=arguments.length>0&&void 0!==e&&e;t&&t.closest(".latepoint-summary-is-open").removeClass("latepoint-summary-is-open")}function latepoint_init_step_payment(e){var t=arguments.length>0&&void 0!==e&&e;t.find(".step-payment-w").data("full-amount")>0&&latepoint_reload_summary(t,"price",latepoint_format_price((100*t.find(".step-payment-w").data("full-amount")/100).toFixed(latepoint_helper.number_of_decimals))),t&&"deposit"==t.find(".step-payment-w").data("default-portion")&&t.find('input[name="booking[payment_portion]"]').val("deposit");var a=t.find('input[name="booking[payment_method]"]').val();!a||jQuery(".lp-payment-times-w").length||jQuery(".lp-payment-methods-w").length||jQuery(".lp-payment-portions-w").length||latepoint_init_payment_method_actions(t,a),jQuery(".latepoint-booking-form-element .coupon-code-input-submit").on("click",(function(e){return latepoint_apply_coupon(jQuery(this).closest(".coupon-code-input-w").find(".coupon-code-input")),!1})),jQuery(".latepoint-booking-form-element .coupon-code-clear").on("click",(function(e){return latepoint_remove_coupon(jQuery(this)),!1})),jQuery(".latepoint-booking-form-element input.coupon-code-input").on("keyup",(function(e){if(13===e.which)return latepoint_apply_coupon(jQuery(this)),!1})),jQuery(".latepoint-booking-form-element .coupon-code-trigger-w a").on("click",(function(e){return jQuery(this).closest(".payment-total-info").addClass("entering-coupon").find(".coupon-code-input").focus(),!1})),jQuery(".latepoint-booking-form-element .lp-payment-trigger-later").on("click",(function(e){var t=jQuery(this).closest(".latepoint-booking-form-element");t.find('input[name="booking[payment_method]"]').val(jQuery(this).data("method")),t.find('input[name="booking[payment_portion]"]').val(""),t.find(".latepoint-form").trigger("submit")})),jQuery(".latepoint-booking-form-element .lp-payment-trigger-payment-time-selector").on("click",(function(e){var t=jQuery(this).closest(".latepoint-booking-form-element"),a=t.find(".step-payment-w");return latepoint_hide_next_btn(t),latepoint_show_prev_btn(t),a.attr("data-sub-step",latepoint_get_payment_sub_step(t,a.attr("data-sub-step"))),!1})),jQuery(".latepoint-booking-form-element .lp-payment-trigger-payment-method-selector").on("click",(function(e){var t=jQuery(this).closest(".latepoint-booking-form-element"),a=jQuery(this).data("method");t.find('input[name="booking[payment_method]"]').val(a);var n=t.find(".step-payment-w");latepoint_hide_next_btn(t),latepoint_show_prev_btn(t),n.attr("data-sub-step",latepoint_get_payment_sub_step(t,n.attr("data-sub-step")))})),
jQuery(".latepoint-booking-form-element .lp-payment-trigger-payment-portion-selector").on("click",(function(e){var t=jQuery(this).closest(".latepoint-booking-form-element"),a=jQuery(this).data("portion");t.find('input[name="booking[payment_portion]"]').val(a),"deposit"==a?t.find(".payment-total-info").addClass("paying-deposit"):t.find(".payment-total-info").removeClass("paying-deposit");var n=t.find(".step-payment-w");latepoint_hide_next_btn(t),latepoint_show_prev_btn(t),n.attr("data-sub-step",latepoint_get_payment_sub_step(t,n.attr("data-sub-step")))}))}function latepoint_init_step_category_items(e){jQuery('.latepoint-step-content[data-step-name="'+e+'"] .os-item-category-info').on("click",(function(){var e;latepoint_show_prev_btn(jQuery(this).closest(".latepoint-booking-form-element")),jQuery(this).closest(".latepoint-step-content").addClass("selecting-item-category");var t=jQuery(this).closest(".os-item-category-w"),a=jQuery(this).closest(".os-item-categories-main-parent");return t.hasClass("selected")?(t.removeClass("selected"),t.parent().closest(".os-item-category-w").length?t.parent().closest(".os-item-category-w").addClass("selected"):a.removeClass("show-selected-only")):(a.find(".os-item-category-w.selected").removeClass("selected"),a.addClass("show-selected-only"),t.addClass("selected")),!1}))}function latepoint_init_step_selectable_items(e){e.off("click",".os-selectable-items .os-selectable-item",latepoint_selectable_item_clicked),e.on("click",".os-selectable-items .os-selectable-item",latepoint_selectable_item_clicked),e.off("click",".os-selectable-items .os-selectable-item .item-quantity-selector-input",latepoint_selectable_item_quantity_keyup),e.on("click",".os-selectable-items .os-selectable-item .item-quantity-selector-input",latepoint_selectable_item_quantity_keyup)}function latepoint_update_quantity_for_selectable_items(e){var t=e.closest(".os-selectable-items").find(".os-selectable-item.selected").map((function(){return jQuery(this).hasClass("has-quantity")?jQuery(this).data("item-id")+":"+jQuery(this).find("input.item-quantity-selector-input").val():jQuery(this).data("item-id")})).get();e.closest(".latepoint-booking-form-element").find(e.data("id-holder")).val(t)}function latepoint_selectable_item_quantity_keyup(e){var t=jQuery(this).closest(".latepoint-booking-form-element"),a=jQuery(this).closest(".os-selectable-item"),n=jQuery(this).val();if(n&&n.match(/^\d+$/)){var o=a.data("max-quantity");o&&n>o&&(n=o)}else n=0;if(jQuery(this).val(n),a.hasClass("selected")&&n>0||!a.hasClass("selected")&&0==n)return latepoint_update_quantity_for_selectable_items(a),latepoint_reload_summary(t),!1;a.trigger("click")}function latepoint_selectable_item_clicked(e){e.stopPropagation(),e.stopImmediatePropagation();var t=jQuery(this).closest(".latepoint-booking-form-element");if(jQuery(this).hasClass("has-quantity")){if(jQuery(e.target).hasClass("item-quantity-selector")){var a=parseInt(jQuery(this).find("input.item-quantity-selector-input").val()),n="minus"==jQuery(e.target).data("sign")?a-1:a+1,o=jQuery(this).data("max-quantity");if(n<0&&(n=0),o&&n>o&&(n=o),jQuery(this).find("input.item-quantity-selector-input").val(n),jQuery(this).hasClass("selected")&&n>0||!jQuery(this).hasClass("selected")&&0==n)return latepoint_update_quantity_for_selectable_items(jQuery(this)),latepoint_reload_summary(t),!1}if(jQuery(e.target).hasClass("item-quantity-selector-input"))return latepoint_update_quantity_for_selectable_items(jQuery(this)),latepoint_reload_summary(t),!1}var s="";jQuery(this).hasClass("os-allow-multiselect")?(jQuery(this).hasClass("selected")?(jQuery(this).removeClass("selected"),jQuery(this).hasClass("has-quantity")&&jQuery(this).find("input.item-quantity-selector-input").val(0)):(jQuery(this).addClass("selected"),!jQuery(this).hasClass("has-quantity")||jQuery(this).find("input.item-quantity-selector-input").val()>0||jQuery(this).find("input.item-quantity-selector-input").val(1)),latepoint_update_quantity_for_selectable_items(jQuery(this)),s=String(jQuery(this).closest(".os-selectable-items").find(".os-selectable-item.selected").map((function(){return" "+jQuery(this).data("summary-value")})).get()).trim(),latepoint_show_next_btn(t)):(jQuery(this).hasClass("os-duration-item")||jQuery(this).closest(".os-item-categories-main-parent").find(".os-selectable-item.selected").removeClass("selected"),jQuery(this).closest(".os-selectable-items").find(".os-selectable-item.selected").removeClass("selected"),jQuery(this).addClass("selected"),t.find(jQuery(this).data("id-holder")).val(jQuery(this).data("item-id")),s=jQuery(this).data("summary-value"),jQuery(this).data("os-call-func")&&window[jQuery(this).data("os-call-func")](jQuery(this)),jQuery(this).data("activate-sub-step")?window[jQuery(this).data("activate-sub-step")](jQuery(this)):latepoint_trigger_next_btn(t)),latepoint_reload_summary(t,jQuery(this).data("summary-field-name"),s)}function latepoint_format_price(e){return","==latepoint_helper.decimal_separator&&(e=String(e).replace(".",",")),latepoint_helper.currency_symbol_before+String(e)+latepoint_helper.currency_symbol_after}function latepoint_init_step_services(){jQuery(".total-attendies-selector-input").on("change",(function(){var e=jQuery(this).closest(".total-attendies-selector-w").data("max-capacity"),t=jQuery(this).closest(".total-attendies-selector-w").data("min-capacity"),a=jQuery(this).val();a=Math.min(Number(e),Number(a)),a=Math.max(Number(t),Number(a)),jQuery(this).val(a);var n=a+" "+(a>1?jQuery(this).data("summary-plural"):jQuery(this).data("summary-singular")),o;latepoint_reload_summary(jQuery(this).closest(".latepoint-booking-form-element"),"total-attendies",n)})),jQuery(".total-attendies-selector").on("click",(function(){var e=jQuery(this).hasClass("total-attendies-selector-plus")?1:-1,t=jQuery(this).closest(".total-attendies-selector-w").data("max-capacity"),a=jQuery(this).closest(".total-attendies-selector-w").data("min-capacity"),n=jQuery(this).closest(".total-attendies-selector-w").find("input.total-attendies-selector-input").val(),o=Number(n)>0?Math.max(Number(n)+e,1):1;return o=Math.min(Number(t),o),o=Math.max(Number(a),o),jQuery(this).closest(".total-attendies-selector-w").find("input").val(o).trigger("change"),!1}))}function latepoint_trigger_next_btn(e){e.find(".latepoint_step_direction").val("next"),e.find(".latepoint-form").trigger("submit")}function latepoint_init_step_locations(){}function latepoint_init_agent_details_link(e){e.on("click",".os-trigger-item-details-popup",(function(){e.find(".os-item-details-popup.open").remove();var t=e.find("#"+jQuery(this).data("item-details-popup-id")).first().clone().attr("id","");return e.find(".latepoint-form-w").addClass("showing-item-details-popup"),t.addClass("open").appendTo(e.find(".latepoint-body")),!1})),e.on("click",".os-item-details-popup.open .os-item-details-popup-close",(function(){return e.find(".latepoint-form-w").removeClass("showing-item-details-popup"),jQuery(this).closest(".os-item-details-popup.open").remove(),!1}))}function latepoint_init_step_agents(){}function latepoint_init_booking_summary_lightbox(){jQuery(".customer-dashboard-booking-summary-lightbox").on("click",".qr-show-trigger",(function(){return jQuery(this).closest(".latepoint-lightbox-i").find(".qr-code-on-full-summary").addClass("show-vevent-qr-code"),!1})),jQuery(".customer-dashboard-booking-summary-lightbox").on("click",".os-item-details-popup-close",(function(){var e=jQuery(this).closest(".latepoint-lightbox-content");return e.find(".os-item-details-popup.open").remove(),e.find(".full-summary-wrapper").show(),!1})),jQuery(".customer-dashboard-booking-summary-lightbox").on("click",".os-trigger-item-details-popup",(function(){var e=jQuery(this).closest(".latepoint-lightbox-content"),t;return e.find(".full-summary-wrapper").hide(),e.find(".os-item-details-popup.open").remove(),e.find("#"+jQuery(this).data("item-details-popup-id")).clone().addClass("open").appendTo(e),!1}))}function latepoint_init_step_confirmation(e){var t=arguments.length>0&&void 0!==e&&e;t&&(t.on("click",".set-customer-password-btn",(function(){var e=jQuery(this),t=jQuery(this).closest(".latepoint-booking-form-element");e.addClass("os-loading");var a={account_nonse:jQuery('input[name="account_nonse"]').val(),password:jQuery('input[name="customer[password]"]').val(),password_confirmation:jQuery('input[name="customer[password_confirmation]"]').val()},n={action:latepoint_helper.route_action,route_name:jQuery(this).data("btn-action"),params:jQuery.param(a),layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function a(n){e.removeClass("os-loading"),"success"===n.status?(t.find(".step-confirmation-set-password").html("").hide(),t.find(".confirmation-cabinet-info").show()):latepoint_show_message_inside_element(n.message,t.find(".step-confirmation-set-password"),"error")}}),!1})),t.on("click",".qr-show-trigger",(function(){var e;return jQuery(this).closest(".latepoint-booking-form-element").find(".qr-code-on-full-summary").addClass("show-vevent-qr-code"),!1})),t.on("click",".show-set-password-fields",(function(){var e=jQuery(this).closest(".latepoint-booking-form-element");return e.find(".step-confirmation-set-password").show(),e.find("#customer_password").focus(),jQuery(this).closest(".info-box").hide(),!1})))}function latepoint_init_customer_dashboard(){latepoint_init_form_masks(),jQuery(".latepoint-customer-timezone-selector-w select").on("change",(function(e){var t=jQuery(this);t.closest(".latepoint-customer-timezone-selector-w").addClass("os-loading");var a={action:latepoint_helper.route_action,route_name:jQuery(this).closest(".latepoint-customer-timezone-selector-w").data("route-name"),params:{timezone_name:jQuery(this).val()},layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function e(a){t.closest(".latepoint-customer-timezone-selector-w").removeClass("os-loading"),"success"===a.status&&location.reload()}})})),jQuery(".latepoint-request-booking-cancellation").on("click",(function(){if(!confirm(latepoint_helper.cancel_booking_prompt))return!1;var e=jQuery(this),t=e.closest(".customer-booking"),a=jQuery(this).data("route"),n={id:t.data("id")},o={action:latepoint_helper.route_action,route_name:a,params:n,layout:"none",return_format:"json"};return e.addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){"success"===a.status?(e.remove(),location.reload()):e.removeClass("os-loading")}}),!1}))}function latepoint_init_customer_dashboard_login(){if(jQuery(".latepoint-login-form-w #facebook-signin-btn").length&&jQuery(".latepoint-login-form-w").length&&jQuery(".latepoint-login-form-w #facebook-signin-btn").on("click",(function(){var e=jQuery(this).closest(".latepoint-login-form-w");FB.login((function(t){if("connected"===t.status&&t.authResponse){var a={token:t.authResponse.accessToken},n={action:latepoint_helper.route_action,route_name:e.find("#facebook-signin-btn").data("login-action"),params:jQuery.param(a),layout:"none",return_format:"json"};latepoint_step_content_change_start(e),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){"success"===a.status?location.reload():(latepoint_show_message_inside_element(a.message,e),latepoint_step_content_change_end(!1,e))}})}}),{scope:"public_profile,email"})})),jQuery(".latepoint-login-form-w #google-signin-btn").length&&jQuery(".latepoint-login-form-w").length&&"undefined"!=typeof google){var e={},t;jQuery(".latepoint-login-form-w").each((function(){var e=jQuery(this);google.accounts.id.initialize({client_id:latepoint_helper.social_login_google_client_id,callback:latepoint_process_google_login}),google.accounts.id.renderButton(e.find("#google-signin-btn")[0],{theme:"outline",size:"medium"})}))}}function get_customer_name(e){var t="",a=e.find('input[name="customer[first_name]"]').val(),n=e.find('input[name="customer[last_name]"]').val();return a&&(t+=a),n&&(t+=" "+n),t.trim()}function latepoint_init_step_contact(){latepoint_init_facebook_login(),latepoint_init_google_login(),latepoint_init_form_masks(),jQuery(".step-contact-w").each((function(){latepoint_reload_summary(jQuery(this).closest(".latepoint-booking-form-element"),"customer",get_customer_name(jQuery(this)))})),jQuery(".step-contact-w").on("keyup",'input[name="customer[first_name]"], input[name="customer[last_name]"]',(function(){var e=jQuery(this).closest(".latepoint-booking-form-element");latepoint_reload_summary(e,"customer",get_customer_name(e))})),jQuery(".step-contact-w").on("keyup",".os-form-control.required",(function(){var e;latepoint_validate_fields(jQuery(this).closest(".latepoint-booking-form-element").find(".step-contact-w .os-form-control.required"))})),jQuery(".step-customer-logout-btn").on("click",(function(){var e=jQuery(this).closest(".latepoint-booking-form-element"),t={action:latepoint_helper.route_action,route_name:jQuery(this).data("btn-action"),layout:"none",return_format:"json"};return latepoint_step_content_change_start(e),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:t,success:function t(a){latepoint_reload_step(e)}}),!1})),jQuery(".step-login-existing-customer-btn").on("click",(function(){var e=jQuery(this).closest(".latepoint-booking-form-element"),t={email:e.find('.os-step-existing-customer-login-w input[name="customer_login[email]"]').val(),password:e.find('.os-step-existing-customer-login-w input[name="customer_login[password]"]').val()},a={action:latepoint_helper.route_action,route_name:jQuery(this).data("btn-action"),params:jQuery.param(t),layout:"none",return_format:"json"};return latepoint_step_content_change_start(e),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){"success"===a.status?latepoint_reload_step(e):(latepoint_show_message_inside_element(a.message,e.find(".os-step-existing-customer-login-w")),latepoint_step_content_change_end(!1,e))}}),!1}))}function latepoint_step_content_change_start(e){e.removeClass("step-content-loaded").addClass("step-content-loading")}function latepoint_step_content_change_end(e,t){e&&t.find(".latepoint-body .latepoint-step-content").replaceWith(e),t.removeClass("step-content-loading").addClass("step-content-mid-loading"),setTimeout((function(){t.removeClass("step-content-mid-loading").addClass("step-content-loaded")}),50)}function latepoint_init_facebook_login(){jQuery("#facebook-signin-btn").length&&jQuery(".latepoint-booking-form-element").length&&jQuery("#facebook-signin-btn").on("click",(function(){var e=jQuery(this).closest(".latepoint-booking-form-element");FB.login((function(t){if("connected"===t.status&&t.authResponse){var a={token:t.authResponse.accessToken},n={action:latepoint_helper.route_action,route_name:e.find("#facebook-signin-btn").data("login-action"),params:jQuery.param(a),layout:"none",return_format:"json"};latepoint_step_content_change_start(e),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){"success"===a.status?latepoint_reload_step(e):(latepoint_show_message_inside_element(a.message,e.find(".os-step-existing-customer-login-w ")),latepoint_step_content_change_end(!1,e))}})}}),{scope:"public_profile,email"})}))}function latepoint_process_google_login(e,t){var a=arguments.length>1&&void 0!==t&&t,n={token:e.credential},o={action:latepoint_helper.route_action,route_name:latepoint_helper.social_login_google_route,params:jQuery.param(n),layout:"none",return_format:"json"};a&&latepoint_step_content_change_start(a),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(t){"success"===t.status?a?latepoint_reload_step(a):location.reload():(latepoint_show_message_inside_element(t.message,a.find(".os-step-existing-customer-login-w ")),latepoint_step_content_change_end(!1,a))}})}function latepoint_init_google_login(){var e;jQuery("#google-signin-btn").length&&jQuery(".latepoint-booking-form-element").length&&"undefined"!=typeof google&&jQuery(".latepoint-booking-form-element").each((function(){var e=jQuery(this);google.accounts.id.initialize({client_id:latepoint_helper.social_login_google_client_id,callback:function t(a){return latepoint_process_google_login(a,e)}}),google.accounts.id.renderButton(e.find("#google-signin-btn")[0],{theme:"outline",size:"medium"})}))}function latepoint_change_step_desc(e,t){e.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){var a=e.find('.latepoint-progress li[data-step-name="'+t+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active");var n=e.find('.latepoint-step-desc-library[data-step-name="'+t+'"]').html();e.find(".latepoint-step-desc").html(n);var o=e.find('.os-heading-text-library[data-step-name="'+t+'"]').html();e.find(".os-heading-text").html(o),setTimeout((function(){e.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function latepoint_progress_prev(e,t){var a=e.find('.latepoint-progress li[data-step-name="'+t+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active")}function latepoint_progress_next(e,t){var a=e.find('.latepoint-progress li[data-step-name="'+t+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active")}function latepoint_next_step_description(e,t){e.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){e.find(".latepoint-step-desc").html(e.find(".latepoint-step-desc-library.active").removeClass("active").next(".latepoint-step-desc-library").addClass("active").html()),e.find(".os-heading-text").html(e.find(".os-heading-text-library.active").removeClass("active").next(".os-heading-text-library").addClass("active").html()),setTimeout((function(){e.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function latepoint_prev_step_description(e,t){e.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){e.find(".latepoint-step-desc").html(e.find(".latepoint-step-desc-library.active").removeClass("active").prev(".latepoint-step-desc-library").addClass("active").html()),e.find(".os-heading-text").html(e.find(".os-heading-text-library.active").removeClass("active").prev(".os-heading-text-library").addClass("active").html()),setTimeout((function(){e.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function latepoint_validate_fields(e){var t=!0;return e.each((function(e){if(""==jQuery(this).val())return t=!1,!1})),t}function latepoint_submit_booking_form(e){var t=e.closest(".latepoint-booking-form-element");t.removeClass("step-content-loaded").addClass("step-content-loading"),jQuery.ajax({type:"post",dataType:"json",processData:!1,contentType:!1,url:latepoint_helper.ajaxurl,data:latepoint_create_form_data_from_booking_form(e),success:function a(n){"success"===n.status?(latepoint_hide_message_inside_element(t.find(".latepoint-body")),t.data("flash-error")&&(latepoint_show_message_inside_element(t.data("flash-error"),t.find(".latepoint-body")),t.data("flash-error","")),t.find(".latepoint_current_step").val(n.step_name),t.removeClass((function(e,t){return(t.match(/(^|\s)current-step-\S+/g)||[]).join(" ")})).addClass("current-step-"+n.step_name),setTimeout((function(){t.removeClass("step-content-loading").addClass("step-content-mid-loading"),t.find(".latepoint-body").find(".latepoint-step-content").addClass("is-hidden"),t.find('.latepoint-step-content[data-step-name="'+n.step_name+'"]')&&t.find('.latepoint-step-content[data-step-name="'+n.step_name+'"]').remove(),t.find(".latepoint-body").append(n.message),latepoint_init_step(n.step_name,t),setTimeout((function(){t.removeClass("step-content-mid-loading").addClass("step-content-loaded"),t.find(".latepoint-next-btn, .latepoint-prev-btn").removeClass("os-loading")}),50)}),500),n.is_pre_last_step?(t.data("next-submit-is-last","yes"),t.find(".latepoint-next-btn span").text(t.find(".latepoint-next-btn").data("pre-last-step-label"))):(t.data("next-submit-is-last","no"),t.find(".latepoint-next-btn span").text(t.find(".latepoint-next-btn").data("label"))),n.is_last_step?(t.addClass("hidden-buttons").find(".latepoint-footer").remove(),t.find(".latepoint-progress").css("opacity",0),t.closest(".latepoint-summary-is-open").removeClass("latepoint-summary-is-open"),t.addClass("is-final-step")):(!0===n.show_next_btn?latepoint_show_next_btn(t):latepoint_hide_next_btn(t),!0===n.show_prev_btn?latepoint_show_prev_btn(t):latepoint_hide_prev_btn(t)),latepoint_change_step_desc(t,n.step_name)):(t.removeClass("step-content-loading").addClass("step-content-loaded"),t.find(".latepoint-next-btn, .latepoint-prev-btn").removeClass("os-loading"),n.send_to_step&&t.find('.latepoint-step-content[data-step-name="'+n.send_to_step+'"]').length?(t.data("flash-error",n.message),latepoint_reload_step(t,n.send_to_step)):(latepoint_show_message_inside_element(n.message,t.find(".latepoint-body")),latepoint_show_prev_btn(t))),e.find(".latepoint_step_direction").val("next")}})}function latepoint_show_error_and_stop_loading_booking_form(e,t){e.send_to_step&&t.find('.latepoint-step-content[data-step-name="'+e.send_to_step+'"]').length?(latepoint_reload_step(t,e.send_to_step),t.data("flash-error",e.message)):(latepoint_show_message_inside_element(e.message,t.find(".latepoint-body"),"error"),t.hasClass("step-content-loading")&&t.removeClass("step-content-loading").addClass("step-content-loaded"),t.find(".latepoint-next-btn").removeClass("os-loading"),t.find(".latepoint-step-content:last-child").prev(".latepoint-step-content").length&&latepoint_show_prev_btn(t),latepoint_scroll_to_top_of_booking_form(t))}function latepoint_init_booking_form(e){if(e.find(".latepoint-form").on("submit",(function(t){t.preventDefault();var a=jQuery(this);latepoint_hide_prev_btn(e);var n=e.find(".latepoint_current_step").val(),o=[];e.trigger("latepoint:submitBookingForm",[{current_step:n,callbacks_list:o,is_final_submit:"yes"==e.data("next-submit-is-last"),direction:e.find(".latepoint_step_direction").val()}]);try{var s;(s=jQuery).when.apply(s,_toConsumableArray(o.map((function(e){return e.action()})))).done((function(){latepoint_submit_booking_form(a)})).fail((function(t){latepoint_show_error_and_stop_loading_booking_form(t,e)}))}catch(t){latepoint_show_error_and_stop_loading_booking_form(t,e)}})),e.find(".latepoint-lightbox-summary-trigger").on("click",(function(){var e;return jQuery(this).closest(".latepoint-w").toggleClass("show-summary-on-mobile"),!1})),e.find(".latepoint-lightbox-close").on("click",(function(){var e=new URLSearchParams(location.search);return e.has("latepoint_booking_intent_key")&&(e.delete("latepoint_booking_intent_key"),history.replaceState(null,"","?"+e+location.hash)),jQuery("body").removeClass("latepoint-lightbox-active"),jQuery(".latepoint-lightbox-w").remove(),!1})),e.find(".latepoint-timezone-selector-w select").on("change",(function(t){var a=jQuery(this);a.closest(".latepoint-timezone-selector-w").addClass("os-loading");var n={action:latepoint_helper.route_action,route_name:jQuery(this).closest(".latepoint-timezone-selector-w").data("route-name"),params:{timezone_name:jQuery(this).val()},layout:"none",return_format:"json"};e.removeClass("step-content-loaded").addClass("step-content-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(n){a.closest(".latepoint-timezone-selector-w").removeClass("os-loading"),e.removeClass("step-content-loading"),"success"===n.status&&a.closest(".latepoint-booking-form-element").hasClass("current-step-datepicker")&&latepoint_reload_step(a.closest(".latepoint-booking-form-element"))}})})),!latepoint_helper.is_timezone_selected){var t=Intl.DateTimeFormat().resolvedOptions().timeZone;t&&t!=e.find(".latepoint-timezone-selector-w select").val()&&e.find(".latepoint-timezone-selector-w select").val(t).change()}e.on("click",".lp-option",(function(){jQuery(this).closest(".lp-options").find(".lp-option.selected").removeClass("selected"),jQuery(this).addClass("selected")})),e.find(".latepoint-next-btn").on("click",(function(t){if(jQuery(this).hasClass("disabled")||jQuery(this).hasClass("os-loading"))return!1;var a;jQuery(this).addClass("os-loading");var n=jQuery(this).closest(".latepoint-form"),o=e.find(".latepoint_current_step").val();n.find(".latepoint_step_direction").val("next");var s=[];e.trigger("latepoint:nextStepClicked",[{current_step:o,callbacks_list:s}]),latepoint_hide_prev_btn(e);try{var i;(i=jQuery).when.apply(i,_toConsumableArray(s.map((function(e){return e.action()})))).done((function(){n.trigger("submit")})).fail((function(t){latepoint_show_error_and_stop_loading_booking_form(t,e)}))}catch(t){latepoint_show_error_and_stop_loading_booking_form(t,e)}return!1})),e.find(".latepoint-prev-btn").on("click",(function(t){if(jQuery(this).hasClass("disabled")||jQuery(this).hasClass("os-loading"))return!1;var a=jQuery(this).closest(".latepoint-form"),n=e.find(".latepoint_current_step").val(),o=e.find('.latepoint-step-content[data-step-name="'+n+'"]');if("payment"==n){var s=e.find(".step-payment-w");if(s.length){s.find(".lp-option.selected").removeClass("selected");var i=latepoint_get_payment_sub_step(e,s.attr("data-sub-step"),!0);if(i!=s.attr("data-sub-step"))return s.find(".lp-payment-method-content").hide(),s.attr("data-sub-step",i),latepoint_hide_next_btn(e),!1}}if("services"==n){var l=e.find(".step-services-w");if(l.hasClass("selecting-service-duration"))return l.removeClass("selecting-service-duration"),l.find(".os-services > .os-item.selected").removeClass("selected"),clear_sub_step_duration(e),e.find(".latepoint-step-content").length<=1&&!l.hasClass("selecting-item-category")&&latepoint_hide_prev_btn(e),latepoint_reload_summary(e),!1;if(l.hasClass("selecting-total-attendies"))return l.removeClass("selecting-total-attendies"),l.find(".os-services > .os-item.selected").hasClass("has-multiple-durations")?(l.find(".os-services > .os-item.selected .os-service-durations .os-selectable-item.selected").removeClass("selected"),l.addClass("selecting-service-duration"),latepoint_hide_next_btn(e)):l.find(".os-services > .os-item.selected").removeClass("selected"),clear_sub_step_attendies(e),e.find(".latepoint-step-content").length<=1&&!l.hasClass("selecting-item-category")&&latepoint_hide_prev_btn(e),latepoint_reload_summary(e),!1}if(o.hasClass("selecting-item-category"))return o.find(".os-item-category-w .os-item-category-w.selected").length?o.find(".os-item-category-w .os-item-category-w.selected").parents(".os-item-category-w").addClass("selected").find(".os-item-category-w.selected").removeClass("selected"):(o.removeClass("selecting-item-category").find(".os-item-category-w.selected").removeClass("selected"),o.removeClass("selecting-item-category").find(".os-item-categories-holder.show-selected-only").removeClass("show-selected-only")),e.find(".latepoint-step-content").length<=1&&!o.hasClass("selecting-item-category")&&latepoint_hide_prev_btn(e),latepoint_reload_summary(e),!1;var r=e.find(".latepoint-step-content:last-child");r.data("clear-action")&&window[r.data("clear-action")](e);var d=jQuery(this);d.addClass("os-loading"),e.removeClass("step-content-loaded").addClass("step-content-loading");var p=e.find(".latepoint-step-content.is-hidden").last(),c=p.data("step-name");return latepoint_change_step_desc(e,c),setTimeout((function(){if(p.removeClass("is-hidden"),r.remove(),e.find(".latepoint_current_step").val(c),e.removeClass((function(e,t){return(t.match(/(^|\s)current-step-\S+/g)||[]).join(" ")})).addClass("current-step-"+c),e.find(".latepoint-next-btn span").text(e.find(".latepoint-next-btn").data("label")),e.data("next-submit-is-last","no"),latepoint_show_next_btn(e),d.removeClass("os-loading"),e.find(".latepoint-step-content").length<=1)if(p.hasClass("selecting-item-category"),"services"==c){var t=e.find(".step-services-w");t.hasClass("selecting-service-duration")||t.hasClass("selecting-total-attendies")||t.hasClass("selecting-item-category")?t.find(".os-services > .os-item.selected").hasClass("is-preselected")?t.hasClass("selecting-total-attendies")&&t.find(".os-services > .os-item.selected").hasClass("has-multiple-durations")?latepoint_show_prev_btn(e):latepoint_hide_prev_btn(e):latepoint_show_prev_btn(e):latepoint_hide_prev_btn(e)}else p.hasClass("selecting-item-category")||latepoint_hide_prev_btn(e);e.removeClass("step-content-loading").addClass("step-content-mid-loading"),setTimeout((function(){e.removeClass("step-content-mid-loading").addClass("step-content-loaded"),latepoint_hide_message_inside_element(e.find(".latepoint-body")),latepoint_reload_summary(e)}),150)}),700),!1})),latepoint_init_agent_details_link(e)}function latepoint_init_booking_form_by_trigger(e){var t=latepoint_helper.booking_button_route,a={},n={};e.data("show-service-categories")&&(n.show_service_categories=e.data("show-service-categories")),e.data("show-locations")&&(n.show_locations=e.data("show-locations")),e.data("show-services")&&(n.show_services=e.data("show-services")),e.data("show-agents")&&(n.show_agents=e.data("show-agents")),e.data("selected-location")&&(n.selected_location=e.data("selected-location")),e.data("selected-agent")&&(n.selected_agent=e.data("selected-agent")),e.data("selected-service")&&(n.selected_service=e.data("selected-service")),e.data("selected-duration")&&(n.selected_duration=e.data("selected-duration")),e.data("selected-total-attendees")&&(n.selected_total_attendies=e.data("selected-total-attendees")),e.data("selected-service-category")&&(n.selected_service_category=e.data("selected-service-category")),e.data("selected-start-date")&&(n.selected_start_date=e.data("selected-start-date")),e.data("selected-start-time")&&(n.selected_start_time=e.data("selected-start-time")),e.data("calendar-start-date")&&(n.calendar_start_date=e.data("calendar-start-date")),e.data("source-id")&&(n.source_id=e.data("source-id")),0==jQuery.isEmptyObject(n)&&(a.restrictions=n);var o={action:latepoint_helper.route_action,route_name:t,params:a,layout:"none",return_format:"json"};e.addClass("os-loading"),jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){if("success"===a.status){var n="booking-form-in-lightbox";"yes"!=e.data("hide-summary")&&(n+=" latepoint-with-summary"),"yes"==e.data("hide-side-panel")&&(n+=" latepoint-hide-side-panel"),latepoint_show_data_in_lightbox(a.message,n);var o=jQuery(".latepoint-lightbox-w .latepoint-booking-form-element");latepoint_init_booking_form(o),latepoint_init_step(a.step,o),jQuery("body").addClass("latepoint-lightbox-active"),e.removeClass("os-loading")}else e.removeClass("os-loading")}})}function latepoint_hide_reschedule_button(){jQuery(".reschedule-confirmation-button-wrapper").hide()}function latepoint_show_reschedule_button(){jQuery(".reschedule-confirmation-button-wrapper").show()}function latepoint_customer_cabinet_reload_booking_tile(e){e.addClass("os-loading");var t={booking_id:e.data("id")},a={action:latepoint_helper.route_action,route_name:e.data("route-name"),params:t,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.removeClass("os-loading"),"success"===a.status?e.replaceWith(a.message):alert(a.message)}})}function latepoint_init_reschedule(){jQuery(".reschedule-calendar-wrapper").on("click",".latepoint-request-reschedule-trigger",(function(){var e=jQuery(this),t=e.closest(".reschedule-calendar-wrapper"),a=t.find('input[type="hidden"].latepoint_booking_id').val();e.addClass("os-loading");var n={booking_id:a,
key:t.find('input[type="hidden"].latepoint_manage_booking_key').val(),start_date:t.find('input[type="hidden"].latepoint_start_date').val(),start_time:t.find('input[type="hidden"].latepoint_start_time').val()},o={action:latepoint_helper.route_action,route_name:e.data("route-name"),params:n,layout:"none",return_format:"json"};return jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(n){e.removeClass("os-loading"),"success"===n.status?(jQuery(".latepoint-lightbox-content").html(n.message),jQuery(".latepoint-lightbox-footer, .latepoint-lightbox-heading").remove(),jQuery(".customer-bookings-tiles").length?latepoint_customer_cabinet_reload_booking_tile(jQuery('.customer-bookings-tiles .customer-booking[data-id="'+a+'"]')):latepoint_manage_by_key_reload_booking()):(latepoint_show_message_inside_element(n.message,jQuery(".latepoint-lightbox-content"),"error"),jQuery(".latepoint-lightbox-content").animate({scrollTop:0},300))}}),!1})),jQuery(".reschedule-calendar-wrapper").on("click",".dp-timepicker-trigger",(function(){var e=jQuery(this).closest(".reschedule-calendar-wrapper");if(jQuery(this).hasClass("is-booked")||jQuery(this).hasClass("is-off"));else if(jQuery(this).hasClass("selected"))jQuery(this).removeClass("selected"),jQuery(this).find(".dp-success-label").remove(),e.find(".latepoint_start_time").val(""),latepoint_hide_reschedule_button();else{e.find(".dp-timepicker-trigger.selected").removeClass("selected").find(".dp-success-label").remove();var t=jQuery(this).find(".dp-label-time").html();jQuery(this).addClass("selected").find(".dp-label").prepend('<span class="dp-success-label">'+e.find(".latepoint-form").data("selected-label")+"</span>");var a=parseInt(jQuery(this).data("minutes")),n=parseInt(e.find(".latepoint_timeshift_minutes").val());n&&(a-=n);var o=new Date(e.find(".os-day.selected").data("date"));a<0?(a=1440+a,o.setDate(o.getDate()-1)):a>=1440&&(a-=1440,o.setDate(o.getDate()+1)),e.find(".latepoint_start_date").val(o.toISOString().split("T")[0]),e.find(".latepoint_start_time").val(a),latepoint_show_reschedule_button()}return!1})),jQuery(".reschedule-calendar-wrapper").on("click",".os-month-next-btn",(function(){var e=jQuery(this).closest(".reschedule-calendar-wrapper"),t=jQuery(this).data("route");if(e.find(".os-monthly-calendar-days-w.active + .os-monthly-calendar-days-w").length)e.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),latepoint_calendar_set_month_label(e);else if(1){var a=jQuery(this);a.addClass("os-loading");var n=e.find(".os-monthly-calendar-days-w").last(),o=n.data("calendar-year"),s=n.data("calendar-month");12==s?(o+=1,s=1):s+=1;var i={action:latepoint_helper.route_action,route_name:t,params:{timezone_name:e.find('input[type="hidden"].latepoint_timezone_name').val(),key:e.find('input[type="hidden"].latepoint_manage_booking_key').val(),target_date_string:"".concat(o,"-").concat(s,"-1"),booking:{id:e.find('input[type="hidden"].latepoint_booking_id').val()}},layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:i,success:function t(n){a.removeClass("os-loading"),"success"===n.status&&(e.find(".os-months").append(n.message),e.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),latepoint_calendar_set_month_label(e))}})}return latepoint_calendar_show_or_hide_prev_next_buttons(e),!1})),jQuery(".reschedule-calendar-wrapper").on("click",".os-month-prev-btn",(function(){var e=jQuery(this).closest(".reschedule-calendar-wrapper");return e.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length&&(e.find(".os-monthly-calendar-days-w.active").removeClass("active").prev(".os-monthly-calendar-days-w").addClass("active"),latepoint_calendar_set_month_label(e)),latepoint_calendar_show_or_hide_prev_next_buttons(e),!1})),jQuery(".reschedule-calendar-wrapper .os-months").on("click",".os-day",(function(){if(jQuery(this).hasClass("os-day-passed"))return!1;if(jQuery(this).hasClass("os-not-in-allowed-period"))return!1;var e=jQuery(this).closest(".reschedule-calendar-wrapper");if(jQuery(this).closest(".os-monthly-calendar-days-w").hasClass("hide-if-single-slot"))if(jQuery(this).hasClass("os-not-available"));else if(e.find(".os-day.selected").removeClass("selected"),jQuery(this).addClass("selected"),e.find(".latepoint_start_date").val(jQuery(this).data("date")),jQuery(this).hasClass("os-one-slot-only")){var t=jQuery(this).data("bookable-minutes").toString().split(":")[0],a=latepoint_format_minutes_to_time(Number(t),Number(jQuery(this).data("service-duration")));e.find(".latepoint_start_time").val(jQuery(this).data("bookable-minutes")),e.find(".time-selector-w").slideUp(200),latepoint_show_reschedule_button()}else day_timeslots(jQuery(this),e,e.find(".latepoint-lightbox-content")),e.find(".latepoint_start_time").val("");else e.find(".latepoint_start_date").val(jQuery(this).data("date")),latepoint_reload_summary(e,"date",jQuery(this).data("nice-date")),e.find(".os-day.selected").removeClass("selected"),jQuery(this).addClass("selected"),day_timeslots(jQuery(this),e,e.find(".latepoint-lightbox-content")),latepoint_reload_summary(e,"time",""),e.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(e);return!1}))}jQuery((function($){$(".latepoint").find("[data-os-action-onload]").length&&$(".latepoint").find("[data-os-action-onload]").each((function(){var e=jQuery(this);e.addClass("os-loading");var t=e.data("os-params"),a=e.data("os-return-format")?e.data("os-return-format"):"json",n={action:"latepoint_route_call",route_name:e.data("os-action-onload"),params:t,return_format:a};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){e.removeClass("os-loading"),"success"===a.status&&"self"==e.data("os-output-target")&&e.html(a.message)}})})),$(".latepoint").on("click","button[data-os-action], a[data-os-action], div[data-os-action], span[data-os-action], tr[data-os-action]",(function(e){var t=jQuery(this);if(t.data("os-prompt")&&!confirm(t.data("os-prompt")))return!1;var a=t.data("os-params"),n;t.data("os-source-of-params")&&(a=latepoint_formdata_to_url_encoded_string(latepoint_create_form_data_from_non_form_element($(t.data("os-source-of-params")))));var o=t.data("os-return-format")?t.data("os-return-format"):"json",s={action:"latepoint_route_call",route_name:t.data("os-action"),params:a,return_format:o};return t.addClass("os-loading"),"side-panel"==t.data("os-output-target")&&($(".latepoint-side-panel-w").remove(),$("body").append('<div class="latepoint-side-panel-w os-loading"><div class="latepoint-side-panel-i"></div><div class="latepoint-side-panel-shadow"></div></div>')),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:s,success:function e(a){if("success"===a.status){if("lightbox"==t.data("os-output-target"))latepoint_show_data_in_lightbox(a.message,t.data("os-lightbox-classes"));else if("side-panel"==t.data("os-output-target"))$(".latepoint-side-panel-i").html(a.message),setTimeout((function(){$(".latepoint-side-panel-w").removeClass("os-loading")}),100);else{if("reload"==t.data("os-success-action"))return latepoint_add_notification(a.message),void location.reload();if("redirect"==t.data("os-success-action"))return void(t.data("os-redirect-to")?(latepoint_add_notification(a.message),window.location.replace(t.data("os-redirect-to"))):window.location.replace(a.message));if(t.data("os-output-target")&&$(t.data("os-output-target")).length)"append"==t.data("os-output-target-do")?$(t.data("os-output-target")).append(a.message):$(t.data("os-output-target")).html(a.message);else switch(t.data("os-before-after")){case"before":t.before(a.message);break;case"after":t.after(a.message);break;case"replace":t.replaceWith(a.message);break;case"none":break;default:latepoint_add_notification(a.message)}}if(t.data("os-after-call")){var n,o=!1;if((n=t.data("os-after-call")).includes(".")){var s=n.split(".");"function"!=typeof window[s[0]][s[1]]&&console.log(n+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[s[0]][s[1]](t,a):t.data("os-pass-this")?window[s[0]][s[1]](t):t.data("os-pass-response")?window[s[0]][s[1]](a):window[s[0]][s[1]]()}else"function"!=typeof window[n]&&console.log(n+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[n](t,a):t.data("os-pass-this")?window[n](t):t.data("os-pass-response")?window[n](a):window[n]()}t.removeClass("os-loading")}else if(t.removeClass("os-loading"),t.data("os-output-target")&&$(t.data("os-output-target")).length?$(t.data("os-output-target")).prepend(latepoint_generate_form_message_html(a.message,"error")):alert(a.message),t.data("os-after-call-error")){var n,o=!1;if((n=t.data("os-after-call-error")).includes(".")){var s=n.split(".");"function"!=typeof window[s[0]][s[1]]&&console.log(n+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[s[0]][s[1]](t,a):t.data("os-pass-this")?window[s[0]][s[1]](t):t.data("os-pass-response")?window[s[0]][s[1]](a):window[s[0]][s[1]]()}else"function"!=typeof window[n]&&console.log(n+" is undefined"),t.data("os-pass-this")&&t.data("os-pass-response")?window[n](t,a):t.data("os-pass-this")?window[n](t):t.data("os-pass-response")?window[n](a):window[n]()}}}),!1})),$(".latepoint").on("click",'form[data-os-action] button[type="submit"]',(function(e){$(this).addClass("os-loading")})),$(".latepoint").on("submit","form[data-os-action]",(function(e){e.preventDefault();var t=$(this),a=new FormData(t[0]);"intlTelInputGlobals"in window&&"intlTelInputUtils"in window&&t.find("input.os-mask-phone").each((function(){var e;if(window.intlTelInputGlobals.getInstance(this)){var t=this.getAttribute("name"),n=window.intlTelInputGlobals.getInstance(this).getNumber(window.intlTelInputUtils.numberFormat.E164);a.set(t,n)}}));var n={action:"latepoint_route_call",route_name:$(this).data("os-action"),params:latepoint_formdata_to_url_encoded_string(a),return_format:"json"};return t.find('button[type="submit"]').addClass("os-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){if(t.find('button[type="submit"].os-loading').removeClass("os-loading"),latepoint_clear_form_messages(t),"success"===a.status){if("reload"==t.data("os-success-action"))return latepoint_add_notification(a.message),void location.reload();if("redirect"==t.data("os-success-action"))return void(t.data("os-redirect-to")?(latepoint_add_notification(a.message),window.location.replace(t.data("os-redirect-to"))):window.location.replace(a.message));if(t.data("os-output-target")&&$(t.data("os-output-target")).length?$(t.data("os-output-target")).html(a.message):"redirect"==a.message?window.location.replace(a.url):(latepoint_add_notification(a.message),t.prepend(latepoint_generate_form_message_html(a.message,"success"))),t.data("os-record-id-holder")&&a.record_id&&t.find('[name="'+t.data("os-record-id-holder")+'"]').val(a.record_id),t.data("os-after-call")){var n=t.data("os-after-call");"function"!=typeof window[n]&&console.log(n+" is undefined"),t.data("os-pass-response")?window[n](a):window[n]()}$("button.os-loading").removeClass("os-loading")}else $("button.os-loading").removeClass("os-loading"),t.data("os-show-errors-as-notification")?latepoint_add_notification(a.message,"error"):(t.prepend(latepoint_generate_form_message_html(a.message,"error")),$([document.documentElement,document.body]).animate({scrollTop:t.find(".os-form-message-w").offset().top-30},200));a.form_values_to_update&&$.each(a.form_values_to_update,(function(e,a){t.find('[name="'+e+'"]').val(a)}))}}),!1}))})),jQuery(document).ready((function($){if(latepoint_init_customer_dashboard_login(),latepoint_init_customer_dashboard(),latepoint_init_manage_booking_by_key(),jQuery("body").on("click",".close-calendar-types",(function(){return jQuery(this).closest(".add-to-calendar-wrapper").removeClass("show-types"),!1})),jQuery("body").on("click",".open-calendar-types",(function(){return jQuery(this).closest(".add-to-calendar-wrapper").addClass("show-types"),!1})),jQuery("body").on("latepoint:nextStepClicked",".latepoint-booking-form-element",(function(e,t){latepoint_add_action(t.callbacks_list,(function(){var t=jQuery.Deferred(),a,n=latepoint_validate_form(jQuery(e.currentTarget).find(".latepoint-form"));if(n.length){var o=n.map((function(e){return e.message})).join(", ");throw t.reject(),new Error(o)}return t.resolve(),t}),1)})),latepoint_helper.start_from_booking_intent_key){var e={action:latepoint_helper.route_action,route_name:latepoint_helper.start_from_booking_intent_route,params:{booking_intent_key:latepoint_helper.start_from_booking_intent_key},layout:"none",return_format:"json"};$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:e,success:function e(t){if("success"===t.status){var a="",n,n;latepoint_show_data_in_lightbox(t.message,t.lightbox_class),latepoint_init_booking_form(n=jQuery(".latepoint-lightbox-w .latepoint-booking-form-element")),n.find(".latepoint-step-content").addClass("is-hidden").last().removeClass("is-hidden"),n.find(".latepoint-step-content").length>1&&latepoint_show_prev_btn(n),(n=jQuery(".latepoint-lightbox-w .latepoint-booking-form-element")).find(".latepoint-step-content").each((function(){latepoint_init_step($(this).data("step-name"),n)})),$("body").addClass("latepoint-lightbox-active")}}})}jQuery(".latepoint-booking-form-element").length&&jQuery(".latepoint-booking-form-element").each((function(){latepoint_init_booking_form(jQuery(this)),latepoint_init_step(jQuery(this).find(".latepoint_current_step").val(),jQuery(this))})),jQuery("body").on("click",".latepoint-lightbox-close",(function(){return latepoint_lightbox_close(),!1})),jQuery("body").on("click",".os-step-tabs .os-step-tab",(function(){jQuery(this).closest(".os-step-tabs").find(".os-step-tab").removeClass("active"),jQuery(this).addClass("active");var e=jQuery(this).data("target");jQuery(this).closest(".os-step-tabs-w").find(".os-step-tab-content").hide(),jQuery(e).show()})),jQuery("body").on("keyup",".os-form-group .os-form-control",(function(){jQuery(this).val()?jQuery(this).closest(".os-form-group").addClass("has-value"):jQuery(this).closest(".os-form-group").removeClass("has-value")})),jQuery(".latepoint-tab-triggers").on("click",".latepoint-tab-trigger",(function(){var e=jQuery(this).closest(".latepoint-tabs-w");return e.find(".latepoint-tab-trigger.active").removeClass("active"),e.find(".latepoint-tab-content").removeClass("active"),jQuery(this).addClass("active"),e.find(".latepoint-tab-content"+jQuery(this).data("tab-target")).addClass("active"),!1})),jQuery("body").on("click",".latepoint-book-button, .os_trigger_booking",(function(){return latepoint_init_booking_form_by_trigger(jQuery(this)),!1}))}));